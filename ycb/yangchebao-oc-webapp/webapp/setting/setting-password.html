	<script type="text/javascript" src="./js/cs_base.js">
	</script>
	<script type="text/javascript" src="./js/md5.js">
	</script>
	<script type="text/javascript">
		function changePassword() {
			if ($('#jrad-modifypassword-wraper .jrad-modifypassword-form').form('validateAll')) {
				if($("#jrad-modifypassword-wraper div[name=newPassword]").input('val') != $("#jrad-modifypassword-wraper div[name=confirmNewPassword]").input('val')) {
					$.jRadMessage({message:'两次密码输入不一致',level:'warning'});
					return;
				}
				var postData = {
					"old": hex_md5($("#jrad-modifypassword-wraper div[name=oldPassword]").input('val')),
					"new": hex_md5($("#jrad-modifypassword-wraper div[name=newPassword]").input('val'))
				};
				var opts = {
					url: "/euc/ws/0.1/change/password",
					dataType: 'json',
					data: postData,
					async: true,
					success: function(data) {
						if (data == true) {
							$.jRadMessage({message:'密码修改成功',level:'success'});
						} else {
                           	$.jRadMessage({message:'修改失败',level:'error'});
						}
					},
					error: function(xhr) {
						if (xhr.responseText) {
                            var message = eval("(" + xhr.responseText + ")");
                            $.jRadMessage({message:message[0].message,level:'error'});
                        } else {
                        	$.jRadMessage({message:'请求超时',level:'error'});
                        }
					}
				};
				$.jRadPost(opts);
			}
		}
		$(document).ready(function() {
			var params = {};
			params['oldPassword'] = {
				type: 'password'
			};
			params['newPassword'] = {
					type: 'password'
			};
			params['confirmNewPassword'] = {
					type: 'password'
			};
			var validators = {};
			validators['oldPassword'] = [{type:'min',msg:'请输入原始密码',value:'1'}];
			validators['newPassword'] = [{type:'min',msg:'请输入新密码',value:'1'}];
			validators['confirmNewPassword'] = [{type:'min',msg:'请确认新密码',value:'1'}];
			$('#jrad-modifypassword-wraper .jrad-btn-primary').button({
				click: function() {
					changePassword();
				}
			});
			$('#jrad-modifypassword-wraper .jrad-btn-normal').button({
				click: function() {
				    $(".tabs .tabs-selected").find(".tabs-close").click();
				}
			});
			$('#jrad-modifypassword-wraper .jrad-modifypassword-form').form({
				autobinding: false,
				validators: validators,
				fields_params: params,
				layout:'grid'
			});
		});
	</script>
<div class="urlContentWraper"  id="jrad-modifypassword-wraper">
	<div class="grid-container jrad-modifypassword-form">
		<!--表单内容-->
		<div class="grid-layout ui-form">
			<h2 class="ui-tit"><strong>修改密码</strong></h2>
			<div class="grid-layout-main jrad-form">
				<div class="row">
					<label class="span3 grid-layout-label"><span class="ui-form-required">*</span>原始密码：</label>
					<div class="span5 grid-layout-content">
						<div name="oldPassword" placeholder="请输入原始密码" class="jrad-input-container"></div>
					</div>
				</div>
				<div class="row">
					<label class="span3 grid-layout-label"><span class="ui-form-required">*</span>新密码：</label>
					<div class="span5 grid-layout-content">
						<div name="newPassword" placeholder="请输入新密码" class="jrad-input-container"></div>
					</div>
				</div>
				<div class="row">
					<label class="span3 grid-layout-label"><span class="ui-form-required">*</span>密码确认：</label>
					<div class="span5 grid-layout-content">
						<div name="confirmNewPassword" placeholder="请再次输入新密码" class="jrad-input-container"></div>
					</div>
				</div>
				<div class="row">
					<div class="span8 offset3 jrad-buttons-container ui-buttons-container">
						<span class="jrad-btn-normal">
							取消
						</span>
						<span class="jrad-btn-primary">
							保存
						</span>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>