
<div class="urlContentWraper" id="Wraper_doorTest_order">
    <div class="ui-info-layout">
        <h2 class="ui-tit"><strong>上门检测订单</strong></h2>
		<div class="pic-grid">
			<table id="Table_doorTest_order"></table>
		</div>
    </div>
    <!-- <div id="Form_explain_eg56" style="display:none;">
        <div class="grid-layout-main jrad-form"> 
            <div class="row">
                <label class="span3 grid-layout-label">业务说明：</label>
                <div class="span12 grid-layout-content">
                    <div><strong>功能简介：</strong>APP上外接的欧飞加油卡的订单列表。</div>
                    <div><strong>重要功能说明：</strong>无。</div>
                    <div><strong>注意事项：</strong>无。</div>
                </div> 
            </div> 
            <div class="row">
                <label class="span3 grid-layout-label">备注：</label>
                <div class="span12 grid-layout-content">
                    <div class="jrad-textarea-container" name="remark">
                    </div>
                </div>
            </div>
        </div>
        <div class="jrad-buttons-container ui-buttons-container"> 
            <span class="jrad-btn-primary">确定</span> 
            <span class="jrad-btn-normal">取消</span>
        </div>
    </div> -->
</div>
<script type="text/javascript">
$(document).ready(function(){
    var wraper = $('#Wraper_doorTest_order');
    var page_column_model = new Array();
    var page_search_items = new Array();
    var page_list_buttons = new Array(); 
	var entityModel = {};
    var jRad = $.jRad({app:'radsample-ws',entityModel:entityModel}); 
	
	jRad.params['orderStatus'] = { 
		data: [{id:'',name:'全部'},{id:'1',name:'待支付'},{id:'2',name:'待服务'},{id:'3',name:'已检测'},{id:'4',name:'已取消'},{id:'5',name:'已退款'},{id:'6',name:'已失效'}] 
	};
	jRad.params['provinceCodeSearch'] = {
		urlData:{
			url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/getWxArea',
			id: 'areaId',
			name: 'areaName'
		},
		unshiftData: {id:'',name:'请选择'},
		onchange: function(){
			var areaId = $('.searchContent div[name=provinceId]',wraper).select('val'); 
			if(areaId==''){ 
				$('.searchContent div[name=cityId]',wraper).select({
					urlData:{
						url:'',
						id: 'areaId',
						name: 'areaName'
					},
					data:[{id:'',name:'请选择'}],
					val:''
				});
			}else{  
				$('.searchContent div[name=cityId]',wraper).select({ 
					urlData:{
						url: '/shopmanage-ws/ws/0.1/workOrderV2Cms/getWxArea?parentId=' + areaId,
						id: 'areaId',
						name: 'areaName'
					},
					unshiftData: {id:'',name:'请选择'}
				}).select('val','');
			}
		}
	}; 
	jRad.params['areaCodeSearchId'] = {
		data: [{id:'',name:'请选择'}]
	};

    page_column_model.push({display: '订单编号', name : 'orderNumber'});
    page_column_model.push({display: '用户注册ID', name : 'customerId'});
    page_column_model.push({display: '用户手机号', name : 'mobile'});
    page_column_model.push({display: '订单金额', name : 'cost'});
    page_column_model.push({display: '渠道', name : 'orderChannelName'});
	page_column_model.push({display: '订单状态', name : 'orderStatusName'});
	page_column_model.push({display: '预约区域', name : 'address'}); 
	page_column_model.push({display: '下单时间', name : 'createDate'});
	page_column_model.push({display: '订单状态时间', name : 'updateDate'});
    
    page_search_items.push({row:'1',type:'jrad-input',display:'用户注册ID',name:'customerId'});
    page_search_items.push({row:'1',type:'jrad-input',display:'订单编号',name:'orderNumber'});
    page_search_items.push({row:'1',type:'jrad-input',display:'用户手机号',name:'mobile'});

	page_search_items.push({row:'2',type:'jrad-select',display:'城市',name:'provinceId',params:jRad.params['provinceCodeSearch']});
	page_search_items.push({row:'2',type:'jrad-select',display:'区域',name:'cityId',params:jRad.params['areaCodeSearchId']});  

	//page_search_items.push({row:'2',type:'jrad-select',display:'省',name:'provinceId',params:jRad.params['provinceId']});
	//page_search_items.push({row:'2',type:'jrad-select',display:'市',name:'cityId',params:jRad.params['cityId']});
	page_search_items.push({row:'2',type:'jrad-select',display:'订单状态',name:'orderStatus',params:jRad.params['orderStatus']}); 
	page_search_items.push({row:'3',type:'jrad-input',display:'订单金额',name:'cost'});

	page_search_items.push({row:'3',type:'jrad-dateinput',display:'下单开始时间',name:'startCreateDate'});
	page_search_items.push({row:'3',type:'jrad-dateinput',display:'下单结束时间',name:'endCreateDate'});
	page_search_items.push({row:'4',type:'jrad-dateinput',display:'订单状态开始',name:'startUpdateDate'});	
	page_search_items.push({row:'4',type:'jrad-dateinput',display:'订单状态结束',name:'endUpdateDate'});
	page_search_items.push({row:'4',type:'jrad-input',display:'渠道',name:'orderChannel'});

	page_list_buttons.push({displayname: '导出EXCEL',name:'excel', bclass: 'excel',onpress : function(){ 
		 $ .jRadConfirm('确认导出吗？',1,function(){
				 var param = {};
				 var customerId = $.trim($(".searchContent div[name='customerId']",wraper).input('val'));
				 if(customerId!=""){
					param['customerId'] = customerId;
				 };
				 var orderNumber = $.trim($(".searchContent div[name='orderNumber']",wraper).input('val'));
				 if(orderNumber!=""){
					param['orderNumber'] = orderNumber;
				 }; 
				 var mobile = $.trim($(".searchContent div[name='mobile']",wraper).input('val'));
				 if(mobile!=""){
					param['mobile'] = mobile;
				 };
				 var provinceId = $.trim($(".searchContent div[name='provinceId']",wraper).select('val'));
				 if(provinceId!=""){
					param['provinceId'] = provinceId;
				 }; 
				 var cityId = $.trim($(".searchContent div[name='cityId']",wraper).select('val'));
				 if(cityId!=""){
					param['cityId'] = cityId;
				 };
				 var orderStatus = $.trim($(".searchContent div[name='orderStatus']",wraper).select('val'));
				 if(orderStatus!=""){
					param['orderStatus'] = orderStatus;
				 };
				 var cost = $.trim($(".searchContent div[name='cost']",wraper).input('val'));
				 if(cost!=""){
					param['cost'] = cost;
				 };
				 var startCreateDate = $.trim($(".searchContent div[name='startCreateDate']",wraper).dateinput('val'));
				 if(startCreateDate!=""){
					param['startCreateDate'] = startCreateDate;
				 }; 
				 var endCreateDate = $.trim($(".searchContent div[name='endCreateDate']",wraper).dateinput('val'));
				 if(endCreateDate!=""){
					param['endCreateDate'] = endCreateDate;
				 };
				 var startUpdateDate = $.trim($(".searchContent div[name='startUpdateDate']",wraper).dateinput('val'));
				 if(startUpdateDate!=""){
					param['startUpdateDate'] = startUpdateDate;
				 }; 
				 var endUpdateDate = $.trim($(".searchContent div[name='endUpdateDate']",wraper).dateinput('val'));
				 if(endUpdateDate!=""){
					param['endUpdateDate'] = endUpdateDate;
				 }; 
				 var paramUrl = "";
				 if(param!={}){   
				 paramUrl+="?"
				 $.each(param,function(k,v){ 
						paramUrl+="&"+k+"="+v; 
				 });
				 }
				 window.open('/shopmanage-ws/ws/0.1/detectionOrder/exportDetectOrderList'+paramUrl);
			}); 
        }
    });
    page_list_buttons.push({separator: true});

    $('#Table_doorTest_order').flexigrid({
            reload:true,
			method:'get',
            colModel : page_column_model,
            buttons : page_list_buttons,
            searchitems :page_search_items,
			showSearch:true,
            pagination: {
				diaplay_pages: 5,
				align: 'bottom' 
			},
			overflow:true,
			checkBoxType:'single',
            url:'/shopmanage-ws/ws/0.1/detectionOrder/queryDetectOrderList', 
			onError:showUserError
    }); 
		
	function showUserError(xhr){
		var errormsg = eval("(" + xhr.responseText + ")");
		var cDiv = $("#Wraper_doorTest_order .cDiv");
		$.jRadMessage({level:'error',message:errormsg[0].message,selector:cDiv});
	}
	
	// $(".numb56").click(function(){
 //        $('.overcurtainDiv').hide();
 //        var menuId = $(".tabs-selected").attr("menuId")
 //        var data = $.jRadGet({url:'/shopmanage-ws/ws/0.1/remark/getMenuRemark?menuId='+menuId})
 //        $("#Form_explain_eg56").form({}).form('close');
 //        $("#Form_explain_eg56").form({
 //            title:'页面说明',
 //            item:data,
 //            autobinding: true, 
	// 		submit:function(){
 //            	var postData = {};
 //                postData.operator = carsmart_config.operatorName;
 //                postData.menuName = $(".tabs-selected").attr("menuName");
 //                postData.menuId = $(".tabs-selected").attr("menuId");
 //                postData.remark = $("#Form_explain_eg56 div[name='remark']").textarea("val")
	// 			$.jRadPost({
	// 			    url:'/shopmanage-ws/ws/0.1/remark/updateMenuRemark',
	// 			    data:postData,
	// 			    success:function(){
	// 					$("#Form_explain_eg56").form('close')
 //      					$('.overcurtainDiv').hide();
	// 			   	}
	// 			});
	// 		}, 
	// 		cancel:function(){
	// 			$("#Form_explain_eg56").form('close')
 //      			$('.overcurtainDiv').hide();
	// 		}
 //        }).form('open')
 //        $("#Form_explain_eg56 .textarea-content").removeClass("span4").addClass("span12")
 //        $('.overcurtainDiv').hide();
 //        $('.overcurtainDiv').eq(0).show().attr("style","z-index:303;display:block");
 //    })

});
</script>
