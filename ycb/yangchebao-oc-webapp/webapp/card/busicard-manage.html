<div class="urlContentWraper" id="Wraper_busicard_manage">
    <div class="ui-info-layout">
      <div class="qdiv">
           <h2 class="ui-tit"><strong>验证车主卡列表</strong><bottom class="all-work-info numb76">页面说明</bottom></h2>
           <!-- 列表显示 -->
           <table id="Table_busicard_manage"></table>
      </div>
    </div> 
    <div id="Form_explain_eg76" style="display:none;">
        <div class="grid-layout-main jrad-form"> 
            <div class="row">
                <label class="span3 grid-layout-label">业务说明：</label>
                <div class="span12 grid-layout-content">
                    <div><strong>功能简介：</strong>商家出售车主卡后，提成信息的记录功能。</div>
                    <div><strong>重要功能说明：</strong>无。</div>
                    <div><strong>注意事项：</strong>无。</div>
                </div> 
            </div> 
            <div class="row">
                <label class="span3 grid-layout-label">备注：</label>
                <div class="span12 grid-layout-content">
                    <div class="jrad-textarea-container" name="remark">
                    </div>
                </div>
            </div>
        </div>
        <div class="jrad-buttons-container ui-buttons-container"> 
            <span class="jrad-btn-primary">确定</span> 
            <span class="jrad-btn-normal">取消</span>
        </div>
    </div>   
</div>
<script type="text/javascript">
$(document).ready(function(){
    var wraper = $('#Wraper_busicard_manage');
    var page_column_model = new Array();
    var page_search_items = new Array();
    var page_list_buttons = new Array();
	  var entityModel = {};
    var jRad = $.jRad({app:'radsample-ws',entityModel:entityModel}); 

	  jRad.params['transferStatus'] = {
	  	data: [{id:'',name:'全部'},{id:'0',name:'未申请提现'},{id:'1',name:'已申请提现但未转账'},{id:'2',name:'已转账'}] 
	  };
    var fileds_params={};
    fileds_params['transferStatus'] = {
      data: [{id:'',name:'全部'},{id:'0',name:'未申请提现'},{id:'1',name:'已申请提现但未转账'},{id:'2',name:'已转账'}] 
    };

    page_column_model.push({display: 'ID', name : 'cardSaleId'}); 
	  page_column_model.push({display: '商家ID', name : 'busiId'}); 
  	page_column_model.push({display: '车主卡ID', name : 'cardId'}); 
    page_column_model.push({display: '商家简称', name : 'busiRegName'});
    page_column_model.push({display: '车主卡名称', name : 'cardName'});
    page_column_model.push({display: '售价', name : 'salePrice'});
	  page_column_model.push({display: '提成金额', name : 'saleCommission'});
	  page_column_model.push({display: '密码', name : 'pwd'});
	  page_column_model.push({display: '是否已转账', name : 'transferStatus',datasource:fileds_params['transferStatus'].data});
    page_column_model.push({display: '激活时间', name : 'userActiveTime'});
    page_column_model.push({display: '验证时间', name : 'busiVerifyTime'});
	
    
   page_search_items.push({row:'1',type:'jrad-input',display:'商家ID',name:'busiId'}); 
   page_search_items.push({row:'1',type:'jrad-input',display:'车主卡ID',name:'cardId'}); 
   page_search_items.push({row:'1',type:'jrad-input',display:'商家简称',name:'busiRegName'}); 
   page_search_items.push({row:'2',type:'jrad-input',display:'车主卡名称',name:'cardName'}); 
   page_search_items.push({row:'2',type:'jrad-select',display:'是否已转账',name:'transferStatus',params:jRad.params['transferStatus']});
   page_search_items.push({row:'3',type:'jrad-dateinput',display:'售出时间始',name:'buyDateStart'}); 
   page_search_items.push({row:'3',type:'jrad-dateinput',display:'售出时间终',name:'buyDateEnd'});

    page_list_buttons.push({separator: true});
    
    $('#Table_busicard_manage').flexigrid({
            reload:true,
      			method:'get',
            colModel : page_column_model,
            buttons : page_list_buttons,
            searchitems :page_search_items,
            pagination: {
      				diaplay_pages: 5,
      				align: 'bottom' 
      			},
      			showSearch:true,  
            url:'/shopmanage-ws/ws/0.1/cardTopicManage/busiVerifyList', //此时userId为当前登录用户的ID 
      			onError:showError, 
      			checkBoxType:'single'
    });

 
	 $(".numb76").click(function(){
        $('.overcurtainDiv').hide();
        var menuId = $(".tabs-selected").attr("menuId")
        var data = $.jRadGet({url:'/shopmanage-ws/ws/0.1/remark/getMenuRemark?menuId='+menuId})
        $("#Form_explain_eg76").form({}).form('close');
        $("#Form_explain_eg76").form({
            title:'页面说明',
            item:data,
            autobinding: true, 
      submit:function(){
              var postData = {};
                postData.operator = carsmart_config.operatorName;
                postData.menuName = $(".tabs-selected").attr("menuName");
                postData.menuId = $(".tabs-selected").attr("menuId");
                postData.remark = $("#Form_explain_eg76 div[name='remark']").textarea("val")
        $.jRadPost({
            url:'/shopmanage-ws/ws/0.1/remark/updateMenuRemark',
            data:postData,
            success:function(){
            $("#Form_explain_eg76").form('close')
                $('.overcurtainDiv').hide();
            }
        });
      }, 
      cancel:function(){
        $("#Form_explain_eg76").form('close')
            $('.overcurtainDiv').hide();
      }
        }).form('open')
        $("#Form_explain_eg76 .textarea-content").removeClass("span4").addClass("span12")
        $('.overcurtainDiv').hide();
        $('.overcurtainDiv').eq(0).show().attr("style","z-index:303;display:block");
    })
	function showError(xhr){
		 var errormsg = eval("(" + xhr.responseText + ")"); 
		  $.jRadMessage({level:'error',message:errormsg[0].message});
		}
});


 
 
</script>
