 <div class="urlContentWraper" id="Wraper_work_order">
    <div class="ui-info-layout">
        <h2 class="ui-tit"><strong>工单管理列表</strong><bottom class="all-work-info numb181">页面说明</bottom></h2>
        <!-- 列表显示 -->
        <div class="pic-grid">
			<table id="Table_work_order"></table>
		</div>
    </div> 
	<div id="Form_work_order" style="display:none;">
        <div class="grid-layout-main jrad-form">
            <input name="id" type="hidden"> 
            <input name="areaId" type="hidden">
            <div class="row hide" style="display:none;">
                 <label class="span3 grid-layout-label">工单ID：</label>
                 <div class="span6 grid-layout-content">
                       <div name="workOrderId" class="jrad-input-container"></div> 
				</div> 
            </div>         
            <div class="row hide" style="display:none;">
                 <label class="span3 grid-layout-label" >微信ID：</label>
                 <div class="span6 grid-layout-content">
                       <div name="wxUserInfoId" class="jrad-input-container"></div> 
				</div> 
            </div> 
            <div class="row hide" style="display:none;">
                 <label class="span3 grid-layout-label">用户注册ID：</label>
                 <div class="span6 grid-layout-content">
                       <div name="customerId" class="jrad-input-container"></div> 
				</div> 
            </div>   
            <div class="row hide" style="display:none;">
                 <label class="span3 grid-layout-label">昵称：</label>
                 <div class="span6 grid-layout-content">
                       <div name="nickname" class="jrad-input-container"></div> 
						</div> 
            </div> 
            <div class="row">
                 <label class="span3 grid-layout-label">姓名：</label>
                 <div class="span6 grid-layout-content">
                       <div name="realName" class="jrad-input-container"></div> 
						</div> 
            </div>         
            <div class="row">
                 <label class="span3 grid-layout-label">预约服务时间：</label>
                 <div class="span6 grid-layout-content">
                       <div name="reserveServiceDate" class="jrad-dateinput-container"></div> 
						</div> 
            </div>  
            <div class="row">
                 <label class="span3 grid-layout-label">手机：</label>
                 <div class="span6 grid-layout-content">
                       <div name="mobile" class="jrad-input-container"></div> 
						</div> 
            </div>
            <div class="row">
                 	<label class="span3 grid-layout-label">
					一级区域：
					</label>
					<div class="span4 grid-layout-content fluid-wrap">
						<div class="jrad-select-container" name="wxAreaFirstId">
						</div>
					</div>
					<label class="span3 grid-layout-label">
					二级区域：
					</label>
					<div class="span4 grid-layout-content fluid-wrap">
						<div class="jrad-select-container" name="wxAreaSecondId">
					</div>
					</div> 
					<label class="span3 grid-layout-label">
					三级区域：
					</label>
					<div class="span4 grid-layout-content fluid-wrap">
						<div class="jrad-select-container" name="wxAreaThirdId">
					</div>
					</div> 
            </div>     
			<div class="row">
                 <label class="span3 grid-layout-label">地址：</label>
                 <div class="span12 grid-layout-content">
                       <div name="address" class="jrad-input-container"></div> 
						</div> 
            </div>  
            <div class="row">
                 <label class="span3 grid-layout-label">接单师傅：</label>
                 <div class="span5 grid-layout-content">
                       <div name="orderReceiverId" class="jrad-select-container"></div>
                                    </div>
            </div>
             <div class="row">
                 <label class="span3 grid-layout-label">状态：</label>
                 <div class="span5 grid-layout-content">
                       <div name="orderStatus" class="jrad-select-container"></div>
                                    </div>
            </div> 
            <div class="row">
                 <label class="span3 grid-layout-label">车牌号：</label>
                 <div class="span5 grid-layout-content">
                       <div name="plateNumber" class="jrad-input-container"></div>
                                    </div>
            </div>
            <div class="row">
                 <label class="span3 grid-layout-label">品牌：</label>
                 <div class="span5 grid-layout-content">
                       <div name="brandId" class="jrad-select-container"></div>
                                    </div>
            </div>
            <div class="row">
                 <label class="span3 grid-layout-label">车厂：</label>
                 <div class="span5 grid-layout-content">
                       <div name="factoryId" class="jrad-select-container"></div>
                                    </div>
            </div>
            <div class="row">
                 <label class="span3 grid-layout-label">车系：</label>
                 <div class="span5 grid-layout-content">
                       <div name="modelId" class="jrad-select-container"></div>
                                    </div>
            </div>
            <div class="row times">
                 <label class="span3 grid-layout-label">车主问题：</label>
                 <div class="span12 grid-layout-content">
                       <div name="carOwnerQuestion" class="jrad-input-container"></div>
                 </div>
            </div>
            <div class="row">
                 <label class="span3 grid-layout-label">备注：</label>
                 <div class="span5 grid-layout-content">
                       <div name="remarks" class="jrad-textarea-container"></div>
                                    </div>
            </div>
        </div>
           <div class="jrad-buttons-container ui-buttons-container">
            <span class="jrad-btn-primary">确定</span> 
            <span class="jrad-btn-normal">取消</span>
        </div>
    </div>

    <div id="Form_work_msg" style="display:none;">
        <div class="grid-layout-main jrad-form">
            <input name="workOrderId" type="hidden"> 
            <input name="mobile" type="hidden">
            <div class="row">
                <label class="span3 grid-layout-label">发送内容：</label>
                <div class="span5 grid-layout-content">
                       <div name="msgContent" class="jrad-textarea-container"></div> 
				</div> 
            </div>     
        </div>
        <div class="jrad-buttons-container ui-buttons-container">
            <span class="jrad-btn-primary">确定</span> 
            <span class="jrad-btn-normal">取消</span>
        </div>
    </div>
    <div id="Form_explain_eg181" style="display:none;">
        <div class="grid-layout-main jrad-form"> 
            <div class="row">
                <label class="span3 grid-layout-label">业务说明：</label>
                <div class="span12 grid-layout-content">
                    <div><strong>功能简介：</strong>上门检测工单的管理功能。</div>
                    <div><strong>重要功能说明：</strong>①创建：姓名：下单用户的姓名；
                      预约服务时间：客户预约上门的时间；
                      手机：客户手机号码；
                      一级区域、二级区域、三级区域、地址：即为地址；
                      接单师傅：派单给哪位技师；
                      状态：默认为”待确认“，电话确认后，修改为”已确认“，技师上门服务后，同时上传档案，状态修改为”以服务“；
                      其他信息都为电话确认时，写入的客户车辆信息。</div>
                    <div><strong>注意事项：</strong>无。</div>
                </div> 
            </div> 
            <div class="row">
                <label class="span3 grid-layout-label">备注：</label>
                <div class="span12 grid-layout-content">
                    <div class="jrad-textarea-container" name="remark">
                    </div>
                </div>
            </div>
        </div>
        <div class="jrad-buttons-container ui-buttons-container"> 
            <span class="jrad-btn-primary">确定</span> 
            <span class="jrad-btn-normal">取消</span>
        </div>
    </div>
</div>


<script type="text/javascript">
$(document).ready(function(){
    var wraper = $('#Wraper_work_order');
    var page_column_model = new Array();
    var page_search_items = new Array();
    var page_list_buttons = new Array(); 
	var entityModel = {}; 
    var jRad = $.jRad({app:'radsample-ws',entityModel:entityModel});  
	// jRad.validators['wxUserInfoId'] = [{msg:"微信ID不能为空",type:'min',value:'1'},{msg:"微信ID只能是数字",type:'regex',value:/^\d+$/}];
	//jRad.validators['changeIntegral'] = [{"msg":"积分不能为空","type":"min","value":"1"},{msg:"积分只能是数字",type:'regex',value:/^[-]*\d+$/}];
    //省市区select值
	// jRad.params['provinceCodeSearch'] = {
	// 		urlData:{
	// 			url:'/shopmanage-ws/ws/0.1/userInfoCms/provinceAll'
	// 		},
	// 		unshiftData: {id:'',name:'请选择'},
	// 		onchange: function(){
	// 			var provinceCode = $('.searchContent div[name=provinceId]',wraper).select('val');
	// 			if(provinceCode==''){
	// 				$('.searchContent div[name=cityId]',wraper).select({
	// 															urlData:{url:''},
	// 															data:[{id:'',name:'请选择'}],
	// 															val: ''});
	// 			}else{
	// 			$('.searchContent div[name=cityId]',wraper).select({
	// 				urlData:{
	// 					url: '/shopmanage-ws/ws/0.1/userInfoCms/municipalities?provinceId=' + provinceCode 
	// 				},
	// 				unshiftData: {id:'',name:'请选择'},
	// 				val:''
	// 			});
	// 			}  
	// 		}
	// 	};
	// jRad.params['cityIdSearch'] = {
	// 	data: [{id:'',name:'请选择'}] 
	// };  
	// page_column_model.push({display: '用户ID', name : 'userInfoId'});
    page_column_model.push({display: '工单ID', name : 'workOrderId'});
    page_column_model.push({display: '订单编号', name : 'orderNumber'});
    page_column_model.push({display: '微信ID', name : 'wxUserInfoId'});
    page_column_model.push({display: '用户注册ID', name : 'customerId'});
    page_column_model.push({display: '昵称', name : 'nickname'});
    page_column_model.push({display: '手机', name : 'mobile'}); 
    page_column_model.push({display: '订单金额', name : 'cost'}); 
    page_column_model.push({display: '渠道', name : 'orderChannelName'});
    page_column_model.push({display: '车牌号', name : 'plateNumber'});
	page_column_model.push({display: '预约时间', name : 'reserveServiceDate'});
	page_column_model.push({display: '城市区域', name : 'areaName'});
	page_column_model.push({display: '地址', name : 'address'});
	page_column_model.push({display: '车主问题', name : 'carOnwerQuestion',width:300});
	page_column_model.push({display: '接单师傅', name : 'orderReceiverName'});
	page_column_model.push({display: '评价详情', name : 'evaluateText',width:300});
	page_column_model.push({display: '下单时间', name : 'orderDate'});
	page_column_model.push({display: '档案生成时间', name : 'inspectionDate'});
	page_column_model.push({display: '再次检测时间', name : 'nextInspectionDate'});
	page_column_model.push({display: '状态', name : 'orderStatusName'});
	page_column_model.push({display: '申请次数', name : 'countApply'});
	page_column_model.push({display: '服务次数', name : 'countServerd'});
	page_column_model.push({display: '备注', name : 'remarks'});
	page_column_model.push({display: '操作(次数)', name : 'sendMsgCountName',diy:function(item,$div){
    	$div.html('<a href="javascript:" class="operateLink">'+item.sendMsgCountName+'</a>')
    }});
    var fields_params2={};
    fields_params2['msgContent'] = {
		grid:10
	};  
	$("#Form_work_msg",wraper).form({ 
		height:200,
		title: '发送短信',  
		fields_params:fields_params2,
        url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/sendMsg',
        before_submit:function(json){
			json.msgText = json.msgContent;
			return json;
		},
        success_callback:function(){ 
            $('#Table_work_order').flexMessage('发送成功', 'success');
            $('#Table_work_order').flexReload();
         } 
	}); 
    $('.operateLink',wraper).live('click',function(){ 
    	    var checked = $('#Table_work_order').getCheckedTrs(); 
    	    var item = $.jRadGet({url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/getSendMsgText?workOrderId='+checked[0].workOrderId}); 
    	    item.workOrderId = checked[0].workOrderId;
    	    item.mobile = checked[0].mobile;
    		$("#Form_work_msg",wraper).form({'item':item}).form('open');
    });

    page_search_items.push({row:'1',type:'jrad-input',display:'用户注册ID',name:'customerId'});
    page_search_items.push({row:'1',type:'jrad-input',display:'微信ID',name:'wxUserInfoId'}); 
    page_search_items.push({row:'1',type:'jrad-input',display:'工单ID',name:'workOrderId'}); 

    page_search_items.push({row:'2',type:'jrad-input',display:'昵称',name:'nickname'}); 
   	page_search_items.push({row:'2',type:'jrad-dateinput',display:'下单开始时间',name:'orderDateBegin',params:{'dateFmt':'yyyy-MM-dd HH:mm:ss'}});
	page_search_items.push({row:'2',type:'jrad-dateinput',display:'下单结束时间',name:'orderDateEnd',params:{'dateFmt':'yyyy-MM-dd HH:mm:ss'}});

	page_search_items.push({row:'3',type:'jrad-select',display:'状态',name:'orderStatus',params:{ 
			data:[{"id":"","name":"请选择"},
		  		{"id":"1","name":"待确认"},
		  		{"id":"2","name":"已确认"},
		  		{"id":"3","name":"已服务"},
		  		{"id":"4","name":"取消"}
            ]
	}});
	page_search_items.push({row:'3',type:'jrad-input',display:'渠道',name:'orderChannel'});

	page_search_items.push({row:'3',type:'jrad-input',display:'城市区域',name:'areaName'}); 
    page_search_items.push({row:'4',type:'jrad-input',display:'接单师傅',name:'orderReceiverName'});
   	
   	page_search_items.push({row:'4',type:'jrad-select',display:'是否发送短信',name:'sendMsgCount',params:{ 
			data:[{"id":"","name":"请选择"},
		  		{"id":"0","name":"否"},
		  		{"id":"1","name":"是"}]
	}});

   	page_search_items.push({row:'4',type:'jrad-select',display:'评价详情',name:'evaluateType',params:{ 
			data:[{"id":"","name":"请选择"},
		  		{"id":"1","name":"满意"},
		  		{"id":"2","name":"不满意"}]
	}});

    page_search_items.push({row:'5',type:'jrad-dateinput',display:'预约开始时间',name:'reserveServiceDateBegin',params:{'dateFmt':'yyyy-MM-dd HH:mm:ss'}});
    page_search_items.push({row:'5',type:'jrad-dateinput',display:'预约结束时间',name:'reserveServiceDateEnd',params:{'dateFmt':'yyyy-MM-dd HH:mm:ss'}});
    page_search_items.push({row:'5',type:'jrad-input',display:'手机号',name:'mobile'});
    page_search_items.push({row:'6',type:'jrad-input',display:'订单金额',name:'cost'});
    page_search_items.push({row:'6',type:'jrad-input',display:'订单编号',name:'orderNumber'});

	var fields_params = {}; 

	fields_params['wxAreaFirstId'] = {
		urlData:{
			url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/getWxArea',
			id: 'areaId',
			name: 'areaName'
		},
		unshiftData: {id:'',name:'请选择'},
		onchange: function(){
			var wxAreaFirstIdCode = $('#Form_work_order div[name=wxAreaFirstId]',wraper).select('val'); 
			if(wxAreaFirstIdCode==''){ 
				$('#Form_work_order div[name=wxAreaSecondId]',wraper).select({
																urlData:{url:''},
																data:[{id:'',name:'请选择'}],
																val:''});
				$('#Form_work_order div[name=wxAreaThirdId]').select({
					urlData:{url:''},
					data:[{id:'',name:'请选择'}],
					val: ''})
			}else{  
				$('#Form_work_order div[name=wxAreaSecondId]',wraper).select({ 
					urlData:{
						url: '/shopmanage-ws/ws/0.1/workOrderV2Cms/getWxArea?parentId=' + wxAreaFirstIdCode,
						id: 'areaId',
						name: 'areaName'
					},
					unshiftData: {id:'',name:'请选择'}
				}).select('val','');
				$('#Form_work_order div[name=wxAreaThirdId]').select({
						urlData:{url:''},
						data:[{id:'',name:'请选择'}],
						val: ''}); 
			}
		}
	}; 
	fields_params['wxAreaSecondId'] = {
		data: [{id:'',name:'请选择'}],
		onchange: function(){
			var wxAreaSecondIdCode = $('#Form_work_order div[name=wxAreaSecondId]').select('val');
			if(wxAreaSecondIdCode==''){
				$('#Form_work_order div[name=wxAreaThirdId]',wraper).select({
															   urlData:{url:''},
															   data:[{id:'',name:'请选择'}],
															   val:''
															});
			}else{
				$('#Form_work_order div[name=wxAreaThirdId]').select({
					urlData:{
						url: '/shopmanage-ws/ws/0.1/workOrderV2Cms/getWxArea?parentId=' + wxAreaSecondIdCode,
						id: 'areaId',
					    name: 'areaName'
					},
					unshiftData: {id:'',name:'请选择'},
					val:""
				});
			}
		}
	};
	fields_params['wxAreaThirdId'] = {
			data: [{id:'',name:'请选择'}]
	};

	fields_params['orderReceiverId'] = {
		urlData:{
			url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/listOrderReceivers',
			id: 'orderReceiverId',	
			name: 'orderReceiverName' 
		}, 
		unshiftData: {id:'',name:'请选择'} 
	};	
	// fields_params['orderStatus'] = {
	// 		data:[{"id":"","name":"请选择"},
	// 	  		{"id":"1","name":"待确认"},
	// 	  		{"id":"2","name":"已确认"},
	// 	  		{"id":"3","name":"已服务"},
	// 	  		{"id":"4","name":"取消"}
 //            ]
	// }; 
	fields_params['address'] = {
		grid:11
	};  
	fields_params['carOwnerQuestion'] = {
		grid:11
	}; 
	fields_params['reserveServiceDate'] = {
		dateFmt: 'yyyy-MM-dd HH:mm',
	}; 
	
	fields_params['brandId'] = {
		urlData:{
			url:'/shopmanage-ws/ws/0.1/modelCms/brand/list',
			id: 'brandId',
			name: 'brandName'
		},
		unshiftData: {id:'',name:'请选择'},
		onchange: function(){
			var brandId = $('#Form_work_order div[name=brandId]',wraper).select('val'); 
			if(brandId==''){ 
				$('#Form_work_order div[name=factoryId]',wraper).select({
																urlData:{url:''},
																data:[{id:'',name:'请选择'}],
																val:''});
				$('#Form_work_order div[name=modelId]').select({
					urlData:{url:''},
					data:[{id:'',name:'请选择'}],
					val: ''})
			}else{  
			$('#Form_work_order div[name=factoryId]',wraper).select({ 
				urlData:{
					url: '/shopmanage-ws/ws/0.1/modelCms/factory/list?brandId=' + brandId,
					id: 'factoryId',
					name: 'factoryName'
				},
				unshiftData: {id:'',name:'请选择'}
			}).select('val','');
			$('#Form_work_order div[name=modelId]').select({
					urlData:{url:''},
					data:[{id:'',name:'请选择'}],
					val: ''}); 
			}
		}
	}; 
	fields_params['factoryId'] = {
		data: [{id:'',name:'请选择'}],
		onchange: function(){
			var factoryId = $('#Form_work_order div[name=factoryId]').select('val');
			if(factoryId==''){
				$('#Form_work_order div[name=modelId]',wraper).select({
															   urlData:{url:''},
															   data:[{id:'',name:'请选择'}],
															   val:''
															});
			}else{
				$('#Form_work_order div[name=modelId]').select({
					urlData:{
						url: '/shopmanage-ws/ws/0.1/modelCms/model/list?factoryId=' + factoryId,
						id: 'modelId',
					    name: 'modelName'
					},
					unshiftData: {id:'',name:'请选择'},
					val:""
				});
			}
		}
	};
	fields_params['modelId'] = {
		data: [{id:'',name:'请选择'}]
	};

 	$('#Form_work_order').form({ 
		validators: jRad.validators,
		fields_params:fields_params, 
		height:430 
	}); 
	 
    page_list_buttons.push({title: '新增',name:'Add', bclass: 'add',
        onpress : function(){ 
			$('#Form_work_order').form({
                title: '创建', 
                item:{},  
                url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/addWorkOrderV2',
				before_submit:function(json){
                        var areaA = $('#Form_work_order div[name="wxAreaFirstId"]').find('span').html()
                        var areaB = $('#Form_work_order div[name="wxAreaSecondId"]').find('span').html()
                        var areaC = $('#Form_work_order div[name="wxAreaThirdId"]').find('span').html()
                        if(areaA != '请选择' && areaB != '请选择' && areaC != '请选择'){
                            json.areaName = areaA+areaB+areaC
                        }else{
                            json.areaName = '';
                        }
						
						json.areaId=$('#Form_work_order div[name="wxAreaThirdId"]').select('val');
						return json;
				},
                success_callback:function(){ 
					 	$('#Table_work_order').flexMessage('创建成功', 'success');
						$('#Table_work_order').flexReload();
					}
            }).form('open'); 
            $('#Form_work_order div[name="orderStatus"]',wraper).select('destroy');
            $('#Form_work_order div[name="orderStatus"]',wraper).select({
                data:[{"id":"","name":"请选择"},{"id":"1","name":"待确认"},{"id":"2","name":"已确认"},{"id":"3","name":"已服务"},{"id":"4","name":"取消"}],
                val:''
            });
            $('#Form_work_order div.hide').hide();
            $('#Form_work_order div[name="realName"]').input('readonly',false);
            $('.times input').attr('placeholder','空调有异味');
        }
    });  

	page_list_buttons.push({title: '修改',name:'Edit', bclass: 'edit',prefunc:function(){
            var checked = $('#Table_work_order').getCheckedTrs();
            if (checked.length != 1 || checked[0].orderStatus == 3 || checked[0].orderStatus == 4) {return false;}else{return true;}
        },onpress : function(){
            var checked = $('#Table_work_order').getCheckedTrs(); 
            if(checked[0]) { 
                var item = $.jRadGet({url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/getComplexWorkOrder?workOrderId='+checked[0].workOrderId});
				item.shopAccountId = checked[0].shopAccountId;
				$('#Form_work_order').form({
					title: '修改', 
					item:item,   
					url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/editWorkOrder',
					before_submit:function(json){
							json.workOrderId = checked[0].workOrderId;
							var areaA = $('#Form_work_order div[name="wxAreaFirstId"]').find('span').html()
                            var areaB = $('#Form_work_order div[name="wxAreaSecondId"]').find('span').html()
                            var areaC = $('#Form_work_order div[name="wxAreaThirdId"]').find('span').html()
                            if(areaA != '请选择' && areaB != '请选择' && areaC != '请选择'){
                                json.areaName = areaA+areaB+areaC
                            }else{
                                json.areaName = '';
                            }
							//json.orderDate=item.orderDate;
							return json;
					},
					success_callback:function(){ 
                            $('#Table_work_order').flexMessage('修改成功', 'success');
                            $('#Table_work_order').flexReload();
                        } 
                }).form('open');  

                var items = item.orderStatus
                var convertPlus = [];
                
                $.each(items,function(index, vo){
                    var __id = vo['orderStatusIndex'];
                    var __name = vo['orderStatusName'];
                    var __tm = {'id':__id,'name': __name};
                    convertPlus.push(__tm)
                });
                convertPlus.unshift({id:'',name:'全部'})

                $('#Form_work_order div[name="orderStatus"]',wraper).select('destroy');
                $('#Form_work_order div[name="orderStatus"]',wraper).select({
                    data:convertPlus,
                    val:''
                });
                    

			    $('#Form_work_order div:hidden').show();
			    $('#Form_work_order div[name="wxUserInfoId"],#Form_work_order div[name="workOrderId"],#Form_work_order div[name="nickname"],#Form_work_order div[name="realName"],#Form_work_order div[name="customerId"]').input('readonly',true);
            }
        }
    }); 
    
     
	page_list_buttons.push({displayname: '导出',name:'enabled',bclass: 'enabled',onpress : function(){
			$.jRadConfirm('确认导出吗？',1,function(){
				 var param = {};
				 var customerId = $.trim($(".searchContent div[name='customerId']",wraper).input('val'));
				 if(customerId!=""){
					param['customerId'] = customerId;
				 }; 
				 var wxUserInfoId = $.trim($(".searchContent div[name='wxUserInfoId']",wraper).input('val'));
				 if(wxUserInfoId!=""){
					param['wxUserInfoId'] = wxUserInfoId;
				 };
				  var workOrderId = $.trim($(".searchContent div[name='workOrderId']",wraper).input('val'));
				 if(workOrderId!=""){
					param['workOrderId'] = workOrderId;
				 };
				 var nickname = $.trim($(".searchContent div[name='nickname']",wraper).input('val'));
				 if(nickname!=""){
					param['nickname'] = nickname;
				 }; 
				  var orderDateBegin = $.trim($(".searchContent div[name='orderDateBegin']",wraper).dateinput('val'));
				 if(orderDateBegin!=""){
					param['orderDateBegin'] = orderDateBegin;
				 };
				 var orderDateEnd = $.trim($(".searchContent div[name='orderDateEnd']",wraper).dateinput('val'));
				 if(orderDateEnd!=""){
					param['orderDateEnd'] = orderDateEnd;
				 };  
				  var orderStatus = $.trim($(".searchContent div[name='orderStatus']",wraper).select('val'));
				 if(orderStatus!=""){
					param['orderStatus'] = orderStatus;
				 };  
				 var orderChannel = $.trim($(".searchContent div[name='orderChannel']",wraper).input('val'));
				 if(orderChannel!=""){
					param['orderChannel'] = orderChannel;
				 };  
				 var areaName = $.trim($(".searchContent div[name='areaName']",wraper).input('val'));
				 if(areaName!=""){
					param['areaName'] = areaName;
				 };

				  var orderReceiverName = $.trim($(".searchContent div[name='orderReceiverName']",wraper).input('val'));
				 if(orderReceiverName!=""){
					param['orderReceiverName'] = orderReceiverName;
				 }; 
					
				  var sendMsgCount = $.trim($(".searchContent div[name='sendMsgCount']",wraper).select('val'));
				 if(sendMsgCount!=""){
					param['sendMsgCount'] = sendMsgCount;
				 }; 

				  var mobile = $.trim($(".searchContent div[name='mobile']",wraper).input('val'));
				 if(mobile!=""){
					param['mobile'] = mobile;
				 }; 

				  var reserveServiceDateBegin = $.trim($(".searchContent div[name='reserveServiceDateBegin']",wraper).dateinput('val'));
				 if(reserveServiceDateBegin!=""){
					param['reserveServiceDateBegin'] = reserveServiceDateBegin;
				 }; 

				  var reserveServiceDateEnd = $.trim($(".searchContent div[name='reserveServiceDateEnd']",wraper).dateinput('val'));
				 if(reserveServiceDateEnd!=""){
					param['reserveServiceDateEnd'] = reserveServiceDateEnd;
				 }; 
				 
				  var evaluateType = $.trim($(".searchContent div[name='evaluateType']",wraper).select('val'));
				 if(evaluateType!=""){
					param['evaluateType'] = evaluateType;
				 }; 

                 var cost = $.trim($(".searchContent div[name='cost']",wraper).input('val'));
                 if(cost!=""){
                    param['cost'] = cost;
                 };
                 var orderNumber = $.trim($(".searchContent div[name='orderNumber']",wraper).input('val'));
                 if(orderNumber!=""){
                    param['orderNumber'] = orderNumber;
                 };


				 var paramUrl = "";
				 if(param!={}){   
					 paramUrl+="?"
					 $.each(param,function(k,v){ 
							paramUrl+="&"+k+"="+v; 
					 });
				 }
				 window.open("/shopmanage-ws/ws/0.1/workOrderV2Cms/exportWorkOrdersV2"+paramUrl);
			}); 
		}
	});
    page_list_buttons.push({separator: true});  

	$('#Table_work_order').flexigrid({
			reload:true,
			method:'get',  
			overflow:true,
			colModel : page_column_model,
			buttons : page_list_buttons,
			searchitems :page_search_items,
			showSearch:true,
			pagination: {
				diaplay_pages: 5,
				align: 'bottom' 
			},
			url:'/shopmanage-ws/ws/0.1/workOrderV2Cms/queryWorkOrdersV2',
			onError:showError,
			checkBoxType:'single'
	});  
    
    $(".numb181").click(function(){
        $('.overcurtainDiv').hide();
        var menuId = $(".tabs-selected").attr("menuId")
        var data = $.jRadGet({url:'/shopmanage-ws/ws/0.1/remark/getMenuRemark?menuId='+menuId})
        $("#Form_explain_eg181").form({}).form('close');
        $("#Form_explain_eg181").form({
            title:'页面说明',
            item:data,
            autobinding: true, 
            submit:function(){
                var postData = {};
                postData.operator = carsmart_config.operatorName;
                postData.menuName = $(".tabs-selected").attr("menuName");
                postData.menuId = $(".tabs-selected").attr("menuId");
                postData.remark = $("#Form_explain_eg181 div[name='remark']").textarea("val")
                $.jRadPost({
                    url:'/shopmanage-ws/ws/0.1/remark/updateMenuRemark',
                    data:postData,
                    success:function(){
                        $("#Form_explain_eg181").form('close')
                        $('.overcurtainDiv').hide();
                    }
                });
            }, 
            cancel:function(){
                $("#Form_explain_eg181").form('close')
                $('.overcurtainDiv').hide();
            }
        }).form('open')
        $("#Form_explain_eg181 .textarea-content").removeClass("span4").addClass("span12")
        $('.overcurtainDiv').hide();
        $('.overcurtainDiv').eq(0).show().attr("style","z-index:303;display:block");
    })

	function showError(xhr){
		var errormsg = eval("(" + xhr.responseText + ")");
		var cDiv = $("#Wraper_work_order .cDiv");
		$.jRadMessage({level:'error',message:errormsg[0].message,selector:cDiv});
	}
});

</script>
