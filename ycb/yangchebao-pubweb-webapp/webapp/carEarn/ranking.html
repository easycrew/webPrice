<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,heihgt=device-height,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="format-detection" content="telephone=no" />
	<title>排行榜</title>
	<script src="http://app.yangchebao.com.cn/group1/M00/00/9F/jquery-1.9.1.min.00000000000000.js"></script> 
	<script src="http://app.yangchebao.com.cn/group1/M00/00/9F/jquery.json-2.2.000000000000000.js"></script>
	<script src="./js/commen.js"></script>
	<link rel="stylesheet" href="./css/main.css">
	<style>  
		ul.bottomUl li{
			background-color: #FFFFFF;
			width: 94%;
			padding: 1rem;
			border-bottom: 1px solid #d9d9e2;
			max-height: 4.75rem;
			float: left;
			position: relative;
			overflow: hidden;
		}
		div.liL{
			width: 4rem;
			float: left;
			text-align: center;
			padding: 0.4rem 1rem 0.4rem 0rem;
			border-right: 1px solid #d9d9e2;
			margin-right: 2.2rem;
		}
		p.liLT img{
			width: 1rem;
			margin-bottom: 0.8rem;
		}
		p.liLB{
			font-size: 1.4rem;
		}
		div.liR{
			float: left;
		}
		p.liRT{
			color: #ff6138;
			font-size: 1.2rem;
		}
		span.money2{
			font-size: 1.6rem;
		}
		span.nickName2{
			color: #000;
			font-size: 1.5rem;
		}
		span.mobile2{
			color: #a2a2a2;
			font-size: 1.2rem;
		}
		ul.bottomUl li.myRank{
			background-color: #54c3aa;
		}
		li.myRank p.liLB,li.myRank p.liRT,.myRank span.money2,li.myRank span.nickName2,li.myRank span.mobile2{
			color: #FFFFFF;
		}
		.my{
			color: #fff!important;
		}
		@keyframes mymove
		{
			0%   {margin-left: 32rem;}
			70%  {margin-left:0}
			85%  {margin-left: 2rem;}
			100% {margin-left: 0;}
		}
		
		@-moz-keyframes mymove /* Firefox */
		{
			0%   {margin-left: 32rem;}
			70%  {margin-left:0}
			85%  {margin-left: 2rem;}
			100% {margin-left: 0;}
		}
		
		@-webkit-keyframes mymove /* Safari 和 Chrome */
		{
			0%   {margin-left: 32rem;}
			70%  {margin-left:0}
			85%  {margin-left: 2rem;}
			100% {margin-left: 0;}
		}

		@-o-keyframes mymove /* Opera */
		{
			0%   {margin-left: 32rem;}
			70%  {margin-left:0}
			85%  {margin-left: 2rem;}
			100% {margin-left: 0;}
		}
	</style>
</head>
<body>
    <input name="share" type="hidden" value="1" />
    <input name="share" id="shareContent" type="hidden" value="" />
    <input name="share" id="shareUrl" type="hidden" value=""/>
    <input name="share" type="hidden" value="http://app.yangchebao.com.cn/group1/M00/0C/0C/ChUBl1W7DPmAe6klAAA5VD3g4B4086.jpg"/>
	<section>
		<article class="top">
			<ul class="topUl">
				<!--li class="clearfix">
					<p class="modalW"><img src="./img/medal1.png"></p>
					<div class="textW">
						<p class="oneP"><span class="money">1600.5</span>元</p>
						<p class="twoP"><span class="nickName">疯狂的爪子疯狂…</span><span class="mobile">186xxxx8996</span></p>
					</div>
				</li>
				<li class="clearfix">
					<p class="modalW"><img src="./img/medal2.png"></p>
					<div class="textW">
						<p class="oneP"><span class="money">1600.5</span>元</p>
						<p class="twoP"><span class="nickName">疯狂的爪子疯狂…</span><span class="mobile">186xxxx8996</span></p>
					</div>
				</li>
				<li class="clearfix">
					<p class="modalW"><img src="./img/medal3.png"></p>
					<div class="textW">
						<p class="oneP"><span class="money">1600.5</span>元</p>
						<p class="twoP"><span class="nickName">疯狂的爪子疯狂…</span><span class="mobile">186xxxx8996</span></p>
					</div>
				</li-->
			</ul>
		</article>
		<article class="bottom">
			<ul class="bottomUl">
				<!--li class="clearfix">
					<div class="liL">
						<p class="liLT"><img src="./img/rankingRIcon.png"></p>
						<p class="liLB">4</p>
					</div>
					<div class="liR">
						<p class="liRT"><span class="money2">880.78</span>元</p>
						<p class="liRB"><span class="nickName2">奥迪车主</span><span class="mobile2">（186xxxx8996）</span></p>
					</div>
				</li>
				<li class="clearfix">
					<div class="liL">
						<p class="liLT"><img src="./img/rankingRIcon.png"></p>
						<p class="liLB">5</p>
					</div>
					<div class="liR">
						<p class="liRT"><span class="money2">880.78</span>元</p>
						<p class="liRB"><span class="nickName2">奥迪车主</span><span class="mobile2">（186xxxx8996）</span></p>
					</div>
				</li>
				<li class="clearfix myRank">
					<div class="liL">
						<p class="liLT"><img src="./img/rankingWIcon.png"></p>
						<p class="liLB my">6</p>
					</div>
					<div class="liR">
						<p class="liRT my"><span class="money2 my">880.78</span>元</p>
						<p class="liRB"><span class="nickName2 my">奥迪车主</span><span class="mobile2 my">（186xxxx8996）</span></p>
					</div>
				</li-->
			</ul>
		</article>
	</section>
<script language="javascript">
var paramJson={}; 
$(function(){   
    var url = window.location.search; 
    if(url!=''){
         var paramsArr = (url.split("?")[1]).split("&"); 
         $.each(paramsArr,function(i){
           var item = paramsArr[i].split("=");
               paramJson[item[0]] = item[1];
         }) 
    } 
	$("#shareContent").val("快来和我一起赚钱吧~");
	$("#shareUrl").val("http://"+urlIp()+"/yangchebao-pubweb/carEarn/rankShare.html?userId="+paramJson.userId+"&loginStatus="+paramJson.loginStatus);
	getRankList();
});

function getRankList(){ 
	function addCss(t,lt){
		var cssStr='animation:mymove '+t+'s linear .'+lt+'s;'
				+'-moz-animation:mymove '+t+'s linear .'+lt+'s;'
				+' -webkit-animation:mymove '+t+'s linear .'+lt+'s;'
				+' -o-animation:mymove '+t+'s linear .'+lt+'s; '
		return cssStr
	}
	$.ajax({
		url: '/yangchebao-app-ws/ws/0.1/autogain/earning/ranking?userInfoId='+paramJson.userId+'&loginStatus='+paramJson.loginStatus,
		type: 'get',
		async: false,
		dataType: 'json',
		success: function(data) {   
			var timeLater=1;
			 $.each(data,function(i){
			    var item = data[i];
				if(item.ranking==1||item.ranking==2||item.ranking==3){
					var _li = '	<li class="clearfix">'
							+'<p class="modalW"><img src="./img/medal'+item.ranking+'.png"></p>'
							+'<div class="textW">'
							+'<p class="oneP"><span class="money">'+item.earning+'</span>元</p>'
							+'<p class="twoP"><span class="nickName">'+item.nickName+'</span><span class="mobile">'+item.mobile+'</span></p>'
							+'</div>'
							+'</li>'
					$(".topUl").append(_li);
				}else{
				    var className= "";
					if(item.selfFlag==1){
						className = "myRank";
					}
					var _li = '	<li class="clearfix '+className+'" style="'+addCss(1,timeLater)+'">'
							+'<div class="liL">'
					if(item.selfFlag==1){
						_li+='<p class="liLT"><img src="./img/rankingWIcon.png"></p>'	
						$("#shareContent").val('我在养车宝一共赚取了'+item.earning+'元，排名第'+item.ranking+'名，快来和我一起赚钱吧~')
					}else{
						_li+='<p class="liLT"><img src="./img/rankingRIcon.png"></p>'
					}
						_li+='<p class="liLB">'+item.ranking+'</p>'
							+'</div>'
							+'<div class="liR">'
							+'<p class="liRT"><span class="money2">'+item.earning+'</span>元</p>'
							+'<p class="liRB"><span class="nickName2">'+item.nickName+'</span><span class="mobile2">（'+item.mobile+'）</span></p>'
							+'</div>'
							+'</li>'
					$(".bottomUl").append(_li);  
					timeLater++
				} 
			 });
		},
		error:function(xhr){   
			var mes = eval('('+xhr.responseText+')');  
			errorLog("获取数据失败");
		}
	});   
}
function getShareInfos(){
	var isShare = $("input:eq(0)").val();
	var content = $("input:eq(1)").val();
	var targetUrl = $("input:eq(2)").val();
	var imgUrl = $("input:eq(3)").val();
	window.shareInfos.a(content,targetUrl,imgUrl,isShare);
}
</script>
</body>
</html>