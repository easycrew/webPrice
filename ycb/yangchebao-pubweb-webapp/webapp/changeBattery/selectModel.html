<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,heihgt=device-height,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="format-detection" content="telephone=no" />
	<title>选择车系</title>
	<script src="http://app.yangchebao.com.cn/group1/M00/00/9F/jquery-1.9.1.min.00000000000000.js "></script> 
	<script src="http://app.yangchebao.com.cn/group1/M00/00/9F/jquery.json-2.2.000000000000000.js"></script>
	<link rel="stylesheet" href="./css/main.css">
	<script src="./js/commen.js"></script>
	<style>
		ul.allModels-ul{
			background-color: #FFF;
		}
		ul.allModels-ul li{
			border-bottom: 1px solid #D9D9E2;
		}
		ul.allModels-ul li div.carModel-title{
			background-color: #F2F3F4;
			border-bottom: 1px solid #D9D9E2;
			color: #999;
			font-size: 0.9rem;
			line-height: 1.6rem;
			padding: 0 1.5rem;
		}
		ul.allModels-ul li div.carModel-detail{
			padding-left: 3.2rem;
		}
		ul.allModels-ul li div.carModel-detail p{
			/*color: #323434;*/
			font-size: 1rem;
			line-height: 3rem;
			border-bottom: 1px solid #D9D9E2;
			background-color: #fff;
			cursor: pointer;
		}
		ul.allModels-ul li div.carModel-detail p:last-child{
			border-bottom: none!important;
		}
	</style>
</head>
<body>
	<section id="selectModel">
		<ul class="allModels-ul">
		</ul>
	</section>
</body>
<script type="text/javascript">
	$(function(){
		// 获取参数
		var url = window.location.search; 
	    var paramJson = {};
	    if(url!=''){
	    	var paramsArr = (url.split("?")[1]).split("&");
		    $.each(paramsArr,function(i){
		        var item = paramsArr[i].split("=");
		        paramJson[item[0]] = item[1]
		    });
	    }
		$.ajax({
			url:'/yangchebao-app-ws/ws/0.1/support/model/list?brandId='+paramJson.brandId,
			type:'get',
			dataType:'json',
			async:false,
			contentType:'application/json;charset=utf-8',
			success:function(data){
				var modelStr='';
				data.forEach(function(key,i){
					// modelStr+='<p>'+key+'</p>'
					modelStr+='<li>'
							 +'<div class="carModel-title" id="'+key.id+'">'+key.name+'</div>'
							 +'<div class="carModel-detail">'
					key.models.forEach(function(key2,j){
						modelStr+='<p id="'+key2.id+'">'+key2.name+'</p>'
					});
					modelStr+='</div></li>'
				});
				$('ul.allModels-ul').html(modelStr);
				$('ul.allModels-ul li div.carModel-detail p').unbind('click').bind('click',function(){
					var theModelName=$(this).html();
					var theModelId=$(this).attr('id');
					window.location.href='selectStyle.html?theModelId='+theModelId+'&theModelName='+theModelName+'&userId='+paramJson.userId+'&customerId='+paramJson.customerId
				})
			}
		})
	})
</script>
</html>