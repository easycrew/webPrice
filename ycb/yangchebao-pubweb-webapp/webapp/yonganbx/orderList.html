<!DOCTYPE html>
<html>
<head> 
<meta charset="utf-8" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport" />
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta name="format-detection" content="telephone=no" />
<script src="../js/jquery-1.9.1.min.js"></script>
<script src="../js/jquery.json-2.2.js"></script>  
<script src="js/index.js"></script>  
<link type="text/css" href="css/base.css" rel="stylesheet"/>
<title>理赔单</title>
</head>
<style type="text/css"> 
.header {
    position: relative;
}
.header img {
  display: block;
  width: 100%;
} 
.text-align-middle section {
    background-color: #fff;
    margin-bottom: 1em;
}
.service-wrap, .carwash-wrap, .want-wrap, .news-wrap, .group-buying-wrap {
    background-color: #fff;
}
.service-wrap {
    height: auto;
    overflow: auto;
    padding: 9px 0 7px;
}
.clearfix::before, .clearfix::after {
    content: "";
    display: table;
    line-height: 0;
}
.clearfix::after {
    clear: both;
}
.clearfix::before, .clearfix::after {
    content: "";
    display: table;
    line-height: 0;
}  
.orderList li{
  background-color: #fff; 
  margin-bottom: 1rem;
}
.orderList h1{
  font-weight: normal;
  font-size: 1.5em;
  height: 4rem;
  line-height: 4rem;
  border-bottom: 1px solid #d9d9e2;
  padding: 0 1.5rem;
} 
.orderList .info{
  font-size: 1.2rem;
  height: 4rem;
  line-height: 4rem;
  padding: 0 1.5rem;
  border-bottom: 1px solid #d9d9e2;
  border-top: 1px solid #D9D9E2;
}  
.more {
    background-image: url("images/arrow.png");
    background-position: right center;
    background-repeat: no-repeat;
    background-size: 10px auto;
    color: #6eaade;
    float: right;
    font-size: 1.5em;
    height: 40px;
    line-height: 40px;
    padding-right: 12px;
}
.orderList h1 + .more {
    margin: -2.8em 0.8em 0 0;
} 
/**查看更多**/
.tip {
    color: #a0a097;
    font-size: 1.5em;
    padding: 10px;
    text-align: center;
    display: none;
    cursor:pointer;
}
/**查询结果空**/
.null-tip::before {
    border-bottom: 1px solid #cfd1db;
    content: "";
    display: inline-block;
    margin-right: 0.5em;
    vertical-align: middle;
    width: 2.4em;
}
.null-tip::after {
    border-bottom: 1px solid #cfd1db;
    content: "";
    display: inline-block;
    margin-left: 0.5em;
    vertical-align: middle;
    width: 2.4em;
}
.null-tip {
    color: #cfd1db;
    font-size: 1.8em;
    margin-top: 2.78em;
    text-align: center;
    display: none;
}
.content{
  display: table;
  width: 100%; 
  padding: 1.5rem 0; 
}
.content .left{
    font-size: 1.8rem; 
    text-align: center; 
    display: table-cell;
    text-align: left; 
    padding-left: 1.5rem;
}
.content p{
  font-size: 1.2rem;
  line-height: 150%;
}
.content .tit{
  font-size: 1.5rem;
}
.content .right{
    font-size: 1.8rem;
    color: #FB451F;
    text-align: right;
    margin: 3rem 0;
    display: table-cell;
    vertical-align: middle; 
    padding-right: 1.5rem;
}
</style>
<body> 
   <section>
      <ul class="orderList">
<!--         <li>
            <h1>理赔单号：3535646466464</h1> 
            <span class="more"></span>
            <div class="content">
              <div class="left">
                <p class="tit">靓车会维修厂</p>
                <p>维修零件费 ¥809.00</p><p>维修工时费 ¥600.00</p><p>创建时间：2015-09-22 </p>
              </div>
              <div class="right">¥1409.00</div> 
            </div>
            <p class="info">状态：待确认</p>
        </li>  --> 
      </ul>
  </section>
<p class="null-tip">暂无订单</p>
<p class="tip">点击查看更多</p>  
<script type="text/javascript">
var paramJson = {};
var pageindex = 0;
$(document).ready(function(){  
    var url =window.location.search;   
    if(url!=undefined&&url!=""){
    var paramsArr = (url.split("?")[1]).split("&"); 
    $.each(paramsArr,function(i){
     var item = paramsArr[i].split("=");
     paramJson[item[0]] = item[1];
    });    
    } 
  $(".tip").click(function(){
        getOrderList();
  }); 
  $(".orderList").on("click","h1",function(){
    var num = $(this).parent("li").attr("orderNumber");
    window.location.href = "orderDetail.html"+window.location.search+"&orderNumber="+num;

  }); 
  getOrderList(); 
  function getOrderList(){  
    var url = "/yangchebao-app-ws/ws/0.1/claims/order/page?operatorType=1&customerId="+paramJson.customerId+'&pagesize=10&pageindex='+pageindex+"&"+(new Date()).getTime(); 
    if(paramJson.status!=undefined&&paramJson.status!=""){ 
		url += "&status="+paramJson.status;
    } 
    $.ajax({
        url: url,
        contentType: "application/json;charset=utf-8",
        dataType: "json",
        type: "get",
        success: function(data) {
          if(data.totalCount>0){ 
        		    if((data.page+1)<data.totalPages){
        				$(".tip").show();
        			} else{
        				$(".tip").hide();
        			} 
        			pageindex++;  	
              var items = data.items; 
              $.each(items,function(i){
                var item  = items[i]; 
                    var _li = '  <li orderNumber="'+item.orderNumber+'">'
                            +'<h1>理赔单号：'+item.orderNumber+'</h1> '
                            +'<span class="more"></span>'
                            +'<div class="content">'
                            +'<div class="left">'
                            +'<p class="tit">'+item.businessRegName+'</p>'
                            +'<p>维修零件费 ¥'+item.partsPrice+'</p><p>维修工时费 ¥'+item.workPrice+'</p><p>创建时间：'+item.orderDate+' </p>'
                            +'</div>'
                            +'<div class="right">¥'+item.sumPrice+'</div> '
                            +'</div>'
                            +'<p class="info">状态：'+item.statusName+'</p>'
                            +'</li> '; 
                    $(".orderList").append(_li);
                  });
                }else{
          		    	$(".null-tip").show();
          		  }
        },error: function(xhr) {
			   var mes = eval('('+xhr.responseText+')'); 
			   alertTasat(mes[0].message);
		}
    });
  }
});
</script>
</body>
</html>