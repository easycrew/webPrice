<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" /> 
    <script src="../../js/jquery-1.9.1.min.js"></script>
    <script src="../../js/jquery.json-2.2.js"></script>  
	<script src="../js/index.js"></script>   
    <title>理赔单详情</title>
</head>
<style type="text/css">
html{
   font-size:62.5%;
}
body{
    background-color:#FAFBFC;  
    color:#1e1e1e;
    font-family:'冬青黑体','黑体','HelveticaNeue-Light'; 
} 
a{
    color:#00a0e9;
    text-decoration: none;
}
a:focus{
    outline:none;
}
ul{
    list-style:none;
}
img{
    border:none;
}
*{
    margin:0;
    padding:0;
    text-shadow:none;
}
.clearfix {
  *zoom: 1;
}
.clearfix:before,
.clearfix:after {
  display: table;
  line-height: 0;
  content: "";
}
.clearfix:after {
  clear: both;
} 
.shop-wrap{
    border-bottom: 1px solid #D9D9E2;
    background-color: #fff;
    margin-bottom: 1rem; 
    padding: 1.5rem; 
    height: auto;
    overflow: auto;
} 
.shop-wrap h3 {
    font-size: 1.6rem; 
    font-weight: normal;
    margin-bottom: 0.8rem; 
} 
.shop-wrap .info {
    color: #323232;
    font-size: 1.2rem;
    line-height: 150%;
    margin: 0;
} 
.shop-wrap .pic {
    float: left;
    height: auto; 
    width: 8em;
}
.shop-wrap .pic img {
    display: block; 
    width: 100%;
} 
.shop-wrap .pic + div {
    margin-left: 9.2em;
}
.distance{
    background-color: #fb451f;
    color: #fff;
    display: inline-block;
    float: right;
    font-size: 1.2rem;
    height: 1.1em;
    line-height: 1.1em;
    margin-right: -1.3em;
    padding: 0 0.5em 0 0.3em;
}
footer{
    position: fixed;
    width: 100%;
    bottom:0;
    background-color: #fff; 
} 
.btn-wrap a{
    font-size: 1.6rem;
    height: 3.8rem;
    line-height: 3.8rem;
    display: block;
    width: 50%;
    float: left;
    text-align: center;
    box-sizing:border-box;
}
.btn-wrap .left{
    color: #FB451F;
}
.btn-wrap .statusInfo{
    color: #1E1E1E;
    text-align: left;
    font-size: 1.5rem;
    padding-left: 1.5rem;
}
.btn-wrap .right{
    color: #fff;
    background-color: #FB451F;
} 
.totalPrice{
    height: 4rem;
    line-height: 4rem;
    font-size: 1.2rem;
    text-align: right;
    padding: 0 1.5rem;
    border-bottom: 1px solid #D9D9E2;
    background-color: #fff;
}
.totalPrice span{ 
    font-size: 1.8rem;
    color: #FF6138;
    display: inline-block;
    vertical-align: middle;
    margin-left: 1rem; 
}
.detail-li{
    font-size: 1.5rem;
    height: 4rem;
    line-height: 4rem;
    padding-left: 11rem;
    background-color: #fff;
    border-bottom: 1px solid #D9D9E2;
    position: relative;
}
.detail-li label{
    display: block;
    float: left;
    margin-left: -11rem;
    padding-left: 1.5rem; 
    position: relative;

}
.detail-li label span{
    color: #FF6138;
    position: absolute; 
    top: -3px;
}
.phone{
    display: block;
    position: absolute;
    width: 5.7rem;
    height: 4rem;
    background-image: url("../images/phone.png");
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 2.2rem auto; 
    right: 0;
    border-left: 1px solid #D9D9E2;
    top: 0;
} 
.userRebate{
    font-size: 1.2rem;
    color: #A2A2A2;
    text-align: right; 
    margin-top: 1rem;
    margin-right: 1rem;
}
.userRebate a{ 
    color: #A8D1EE;
    display: inline-block;
    margin-left: 1rem; 
}
div.dialog {
    background-color: #fff;
    border-radius: 8px; 
    position: absolute;
    top: 50%;
	left:0;
    width: 90%;
    z-index: 500;
	margin:0 5%;
} 
.dialog .payItem {
    border-bottom: 1px solid #d9d9e2;
    overflow: hidden;
    padding: 1.6rem 1.6rem 1.6rem 0.6rem;
}
.dialog .payItem p {
    float: left;
    margin-right: 2%;
    text-align: right;
    width: 32%;
}
.dialog .payItem p img.zfbIcon {
    width: 80% !important;
}
.dialog .payItem p img.wxIcon {
    width: 88% !important;
}
.dialog .payItem .txt {
    color: #c2c2c6;
    display: inline-block;
    float: left;
    font-size: 1.3rem;
    width: 58%;
} 
.dialog .payBtn {
    font-size: 1.6rem;
    padding: 1.6rem;
    text-align: center;
}
.dialog .payCheck{
    float: right; 
    background-image: url("../images/payCheck.png");
    background-position: right center;
    background-repeat: no-repeat;
    background-size: auto 1.8rem;  
    width:1.8rem;
    height:1.8rem; 
}
.dialog .payCheck.checked{ 
    background-position: left center; 
}   
.dialog-content h1{
    font-weight: normal;
    font-size: 1.6rem;
    text-align: center;
    height: 3.5rem;
    line-height: 3.5rem;
    border-bottom:1px solid #FF6E47;
    position: relative;
}
.close {
    cursor: pointer;
    display: inline-block;
    height: 28px;
    position: absolute;
    right: 10px;
    top: 5px;
    width: 28px;
    z-index: 10;
}  
.close label {
    display: inline-block;
    margin-left: 10px;
}
.close label::before {
    border-right: 1px solid #fc5d3c;
    content: "";
    display: inline-block;
    height: 28px;
    transform: rotate(45deg); 
    -ms-transform:rotate(45deg);   
    -moz-transform:rotate(45deg); 
    -webkit-transform:rotate(45deg);  
    -o-transform:rotate(45deg); 
    width: 1px;
}
.close label::after {
    border-left: 1px solid #fc5d3c;
    content: "";
    display: inline-block;
    height: 28px;
    transform: rotate(-45deg); 
    -ms-transform:rotate(-45deg);   
    -moz-transform:rotate(-45deg); 
    -webkit-transform:rotate(-45deg);  
    -o-transform:rotate(-45deg);  
    width: 1px;
}
.dialog-content p{ 
    font-size: 1.6rem;
    text-align: center;
    padding: 4.7rem 0;
}
.dialog-btn-wrap{
    margin: 0 1rem;
}
.dialog-btn-wrap a{
    display: block;
    height: 3.5rem;
    line-height: 3.5rem;
    font-size: 1.8rem;
    color:#fff;
    background-color: #FF6E47;
    text-align: center;
    border-radius: 3px;
}
/**错误提示**/
.tasat-wrap{
   position: fixed;
   text-align: center;
   bottom: 50%;
   width: 100%; 
}
.tasat {
	background-color: #000;
	border-radius: 8px;
	color: #fff;
	display: inline-block;
	font-size: 14px;
	margin: 0 20px;
	opacity: 0.8;
	padding: 10px;
} 
.overlay{
    background-color: rgba(0, 0, 0, 0.5);
    height: 100%;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 300;
	display:none;
} 
</style>
<body>  
<div class="detail-li"><label>理赔单号</label><p class="orderNumber"></p></div>
<div class="detail-li" style="margin-bottom:1rem;"><label>下单时间</label><p class="orderDate"></p></div>

<div class="detail-li"><label>理赔员</label><p class="personName"></p>
<a class="phone personMobile" href="javascript:void(0);"></a></div>
<div class="detail-li" style="margin-bottom:1rem;"><label>保险公司</label><p class="insureCompany"></p></div>

<div class="detail-li"><label>理赔维修厂</label>
<a class="phone businessMobile" href="javascript:void(0);"></a></div>
<article class="shop-wrap"> 
    <div class="pic">
        <img src=""/>
    </div>
    <div>
    <h3><span class="tit"><!-- 车龙汽车装饰望京总店 --></span><span class="distance"></span></h3>
        <p class="info"><!-- 地址：朝阳区 --></p>
    </div> 
</article> 
<div class="detail-li"><label>维修零件费<span>*</span></label><p class="partsPrice"><!-- 908.00元 --></p></div>
<div class="detail-li"><label>维修工时费<span>*</span></label><p class="workPrice"><!-- 600.00元 --></p></div>
<p class="totalPrice">合计<span class="sumPrice"><!-- ¥ 1508.00 --></span></p>
<p class="userRebate">使用养车宝付款，立返维修费￥<span>-</span><a href="javascript:void(0);">详细说明</a></p>
<footer class="btn-wrap">
    <a class="left statusInfo" href="javascript:void(0);">状态：<span></span></a> 
    <a class="right payBtn" href="javascript:void(0);" style="display:none;">付款</a>
</footer>
<div style="display:none;" class="dialog pay-dialog"> 
      <div class="zfb payItem checkPayItem">
        <p><img class="zfbIcon" alt="支付宝" src="../images/zfb_icon.png"></p>
        <span class="txt">需要拥有支付宝账号</span>
        <span class="payCheck checked" pid="3"></span>
      </div>
      <div class="wx payItem">
        <p><img class="wxIcon" alt="微信支付" src="../images/wx_icon.png"></p>
        <span class="txt">推荐安装微信5.0版本以上</span>
        <span class="payCheck" pid="1"></span>
      </div>
      <div class="payBtn">确定</div> 
  </div>
  <div class="dialog phone-dialog" style="display:none;"> 
    <div class="dialog-content">
       <h1>提示<span class="close"><label></label></span></h1>
       <p>商家太懒没留电话，请拨打客服电话<br> <a href="tel:400-607-1222">400-607-1222</a></p>
       <div class="dialog-btn-wrap"><a href="javascript:void(0);">确定</a></div>  
   </div>
 </div> 
 <div class="overlay"></div>
<script type="text/javascript">
   var paramJson = {};
   $(document).ready(function(){  
        var url = window.location.search;   
        if(url!=undefined&&url!=""){
        var paramsArr = (url.split("?")[1]).split("&"); 
        $.each(paramsArr,function(i){
         var item = paramsArr[i].split("=");
         paramJson[item[0]] = item[1];
        });    
        }
        paramJson.operatorType = 2;
        getDetail(); 
        $(".payBtn").click(function(){
            $(".pay-dialog").show();
            $(".overlay").show();
        }); 
        $(".pay-dialog .payItem").click(function(){
            $(".pay-dialog .checked").removeClass("checked");
            $(this).children(".payCheck").addClass("checked");
        }); 
       $('.pay-dialog .payBtn').click(function(){
        var payChannel =  $(".pay-dialog .checked").attr("pid"); 
		isLogin('http://w2l/?presentType=1&needLogin=1&androidName=29&iosName=MyWebViewController&sourceId='+paramJson.sourceId+'&itemType=1&fromChannel=claims&payChannel='+payChannel);
		setTimeout(link, 100); 
	   }); 
		var link = function(){ 
		   window.location.href = "pay_result.html";
		  //点支付跳转页面 
		}	
        $('.overlay').click(function(){ 
            $('.dialog').hide(); 
			$(".overlay").hide(); 
        });
		$(".businessMobile").click(function(){
		    if($(this).hasClass("null-phone")){
			 $(".phone-dialog").show();
			 $(".overlay").show(); 
			}
		});
		$(".close").click(function(){
			$(".phone-dialog").hide();
			$(".overlay").hide(); 
		});
		$(".dialog-btn-wrap").click(function(){
			$(".phone-dialog").hide();
			$(".overlay").hide(); 
		});
       function getDetail(){    
            $.ajax({
                url: "/yangchebao-app-ws/ws/0.1/claims/order/detail?operatorType="+paramJson.operatorType+"&customerId="+paramJson.customerId+"&osInfo="+paramJson.osInfo+"&lon="+paramJson.lon+"&lat="+paramJson.lat+"&orderNumber="+paramJson.orderNumber,
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                type: "get",
                success: function(data) {
                    $(".orderNumber").html(data.orderNumber);
                    $(".orderDate").html(data.orderDate);
                    $(".personName").html(data.personName);
                    $(".insureCompany").html(data.insureCompany);
                    $(".personMobile").attr("href","tel:"+data.personMobile);  
					if(data.businessMobile!=undefined&&data.businessMobile!=""){
						$(".businessMobile").attr("href","tel:"+data.businessMobile);
					}else{
						$(".businessMobile").attr("href","javascript:void(0)").addClass("null-phone");
					} 
                    $(".shop-wrap img").attr("src",data.businessLogo);
                    $(".shop-wrap .tit").html(data.businessRegName);
                    $(".shop-wrap .distance").html(data.distance);
                    $(".shop-wrap .info").html("地址："+data.address);
                    $(".partsPrice").html(data.partsPrice+"元");
                    $(".workPrice").html(data.workPrice+"元");
                    $(".sumPrice").html("¥"+data.sumPrice); 
                    paramJson.sourceId = data.sourceId;
                    $(".userRebate span").html(data.userRebate);
                    $(".statusInfo span").html(data.statusName); 
                     $(".userRebate a").attr("href","comment.html?num="+data.userRebate);
                        
                    if(data.status=="2"){
                        $(".payBtn").show();
                    }
                },error: function(xhr) {
                       var mes = eval('('+xhr.responseText+')'); 
                       alertTasat(mes[0].message);
                }
            });
        } 
    });
	window.onload=function(){
		  $.each($(".dialog"),function(){
		   var h = "-"+parseInt($(this).height()/2)+"px"; 
		   $(this).css("margin-top",h);
		});
	
	};
</script>
</body>
</html>