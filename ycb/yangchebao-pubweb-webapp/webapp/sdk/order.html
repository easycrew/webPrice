<!DOCTYPE html>
<html>
<head> 
<meta charset="utf-8" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport" />
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script> 
<script type="text/javascript" src="js/jquery.json-2.2.js"></script> 
<script type="text/javascript" src="js/index.js"></script> 
<title>订单确认</title>
</head>
<style type="text/css">
*{
padding: 0;
margin: 0;
}
body{
    color: #1e1e1e;
    font-family: "冬青黑体","黑体","HelveticaNeue-Light";
    font-size: 62.5%;
    background-color: #f4f7f8;
} 
a,a:hover{
    text-decoration: none;
    outline: none;
}
img,button {
    border:none;
}
ul,ol{
    list-style: none;
}
.header {
    position: relative;
}
.header img {
  display: block;
  width: 100%;
} 
.text-align-middle section {
    background-color: #fff;
    margin-bottom: 1em;
}
.service-wrap, .carwash-wrap, .want-wrap, .news-wrap, .group-buying-wrap {
    background-color: #fff;
}
.service-wrap {
    height: auto;
    overflow: auto;
    padding: 9px 0 7px;
}
.clearfix::before, .clearfix::after {
    content: "";
    display: table;
    line-height: 0;
}
.clearfix::after {
    clear: both;
}
.clearfix::before, .clearfix::after {
    content: "";
    display: table;
    line-height: 0;
} 
.order-wrap h1{
  font-size: 1.6em;
  color: #fff; 
  padding: 10px;
  background-color: #ffa600;
  min-height: 3.25em;
  vertical-align: middle;
  line-height: 150%;
  font-weight: normal;
}  
.order-wrap .price{
 font-size:1.125em;
}
.shop,.user{
  padding: 0 1em;  
  background-color: #fff; 
  border-bottom: 1px solid #d9d9e2;
}
.shop p,.user p{ 
  line-height: 150%;
  padding: 1.43em 0 1.43em 3.46em;  
  color: #1e1e1e;
  font-size: 1.4em;   
}
.shop p{
 background-size: auto 2.4em;
 background-image: url(css/images/point.png);
 background-repeat:no-repeat;  
 background-position:11px center;
}
.user p{
 background-size: auto 2.4em;
 background-image: url(css/images/user.png);
 background-repeat:no-repeat;  
 background-position:11px center;
}
.comment{
  font-size: 1.4em;
  color: #6eaade;
  margin:40px 25px;
  background-color: #e2f0f6;
  border: 1px solid #6eaade;
  border-radius: 5px;
  padding:18px;
  position: relative;
  list-style: decimal inside;
  position: relative;
  margin-bottom: 64px;
} 
.comment li:last-child{
  position: absolute;
  list-style: none;
  color: #fff;
  width: 70px;
  height: 25px;
  line-height: 25px;
  text-align: center;
  border-radius: 12px;
  background-color: #abcfef;
  top: -12px;
  left: 10px;
}
footer{
  border-top:1px solid #fda28f;
  position: fixed;
  bottom: 0;
  width: 100%;
  background-color: #fff;
}
.button{ 
  margin: 11px 10px;
  font-size: 1.6em;
  height: 2em;
  line-height: 2em;
  text-align: center;
  color: #fff;
  display: block;
  cursor:pointer;
  background-color: #fb451f;
}
.point{
  color: #fb451f;
}
.blue{
  background-color: #6eaade;
}
.two-btn{
  height: auto;
  overflow: auto;
}
.two-btn>div{
 width: 50%;  
 float: left;
} 
.two-btn .left .button{
 margin-right: 5px;
}
.two-btn .right .button{
 margin-left: 5px;
}
.button.white{
 background-color: #fff;
 border: 1px solid #fb451f;
 color: #fb451f;
 margin-top: 0;
}  
.two-btn .left p {
    font-size: 1.2em;
    height: 32px;
    margin: 11px 0 11px 10px;
    vertical-align: middle;
}
.two-btn .left p strong{
   font-size: 1.33em;
   font-weight: normal;
}
/*支付*/
.ui-tit::before {
    background-color: #fb451f;
    width: 2px;  
    content: "";
    display: inline-block;
    height: 1.25em;
    margin-right: 0.313em;
    vertical-align: middle; 
}
.ui-tit {
    background-color: #fff; 
    color: #1e1e1e;
    font-size: 1.5em;
    margin: 0;
    padding: 0.67em;
    font-weight: normal;
    border-bottom: 1px solid #dddee6;
    margin-top: 10px;
} 
.ui-tit + .more {
    margin: -2.8em 0.8em 0 0;
}
.more {
    background-image: url("css/images/arrow.png");
    background-position: right center;
    background-repeat: no-repeat;
    background-size: 10px auto;
    color: #6eaade;
    float: right;
    font-size: 1.5em;
    height: 40px;
    line-height: 40px;
    padding-right: 12px;
}
.pay-wrap .info{
  padding: 0 26px;
  height: auto;
  overflow: auto;
  border-bottom: 1px solid #dddee6;
  box-sizing: border-box;
  background-color: #fff;
}
.pay-wrap .info span{
  height: 50px;
  line-height: 50px;
  display: block;
  font-size: 1.4em;
  color: #323232;
}
.fl{
  float: left;
}
.fr{
  float: right;
}
.pay-wrap .info .fl label{
  font-size: 0.86em;
  color: #a0a097;
  display: inline-block;
  height: 30px; 
  line-height: 30px;
  border-left: 1px solid #a0a097;
  padding-left: 20px;
}
.pay-wrap .zfb{
  padding-left: 93px;
  background-image: url(http://app.yangchebao.com.cn/group1/M00/0A/FA/ChUBl1VymuGAaFDRAAAMthS5nvg588.png);
  background-size: 58px auto;
  background-repeat: no-repeat;
  background-position:16px center;
}
.pay-wrap .wx{
  padding-left: 93px;
  background-image: url(http://app.yangchebao.com.cn/group1/M00/0A/FA/ChUBl1Vymx2AT9oYAAAJTkelqrs820.png);
  background-size: 71px auto;
  background-repeat: no-repeat;
  background-position:16px center;
}
.pay-wrap .fr{
  background-image: url("http://app.yangchebao.com.cn/group1/M00/0A/FA/ChUBl1Vym0mAayH1AAAM0DdqyZo480.png");
  background-position: -23px center;
  background-repeat: no-repeat;
  background-size: 44px auto;
  margin-left: 1em;
  width: 21px;
}
.ii-wrap{
  background-color: #f6fff3;
  padding: 14px 15px;  
  border-bottom: 1px solid #dddee6;
}
.ii{
  font-size: 1.4em; 
}
.ii-info{
  color: #ffa600;
  font-size: 1.1em;
  margin-top: 5px;
}
.org{
  color: #fb451f;
} 
.flip-switch {
    background-color: #00e367;
    border-radius: 1.8rem;
    box-sizing: border-box;
    display: inline-block;
    height: 27px;
    padding:1px;
    position: relative;
    text-align: right;
    transition: padding-right 0.5s ease-in 0s;
    vertical-align: middle;
    width: 50px;
} 
.flip-switch label {
    background-color: #ffffff; 
    display: inline-block; 
    width: 25px;
    height: 25px;  
    border-radius: 50%;
    box-shadow: 1px 0px 1px #000;
}
.ui-tit .flip-switch{
  float: right;
  margin-top: -3px;
}
.flip-switch.close{
  padding-right: 23px;
  background-color: #dfe0e7;
}
.dialog{
  position: fixed;
  width: 100%;
  height: 100%; 
  background-color: rgba(0,0,0,0.4);
  top:0;
  bottom: 0;
  z-index:100;
  /**display: none;**/
}
.dialog-content{
  background-color: #fff;
  margin: 30px; 
  position: relative;
}
.dialog .title{
  font-size: 1.8em;
  text-align: center;
  height: 38px;
  line-height: 38px;
  border-bottom: 1px solid #fb451f;
  font-weight: normal;
}
.dialog ul{
  width: 100%; 
  -webkit-box-sizing:border-box;
  box-sizing:border-box; 
  vertical-align: middle; 
  height: 240px;
  overflow:auto;
  margin:10px 0;
} 
.dialog ul li{
 margin-bottom:5px;
}
.dialog .coupon .price{
  display: table-cell;
  width: 60px;
  height: 28px;
  line-height: 28px;
  text-align: center;
  background-image: url(http://app.yangchebao.com.cn/group1/M00/0B/B7/ChUBl1WnR1aAbPCAAAADoUZGqbE977.png);
  background-position: 12px center;
  background-size: 60px auto; 
  background-repeat: no-repeat;
  font-size: 1.65em;
  color: #fff;
  vertical-align: middle;
  padding-left: 12px;
}
.dialog .coupon .desc{  
  background-color:#ffa600;
  color:#fff; 
  margin:0 10px;
  border-radius:5px;
  border:1px solid #fecec4;
  position:relative;
  overflow:hidden;
}
.dialog .coupon .desc>div{
  display: table;
  width:100%;
}
.dialog .left,.dialog .right{
  display: table-cell;
  vertical-align: middle; 
}
.dialog .left{
  padding:6px 0 3px 10px;
}
.dialog .left h1{ 
 font-size:1.2em;
 font-weight:normal;
}
.dialog .left p{ 
 font-size:1em;
 padding-left:22px;
}
.dialog .right{ 
 text-align:center;
 padding:8px 0 5px;
}
.dialog .right h1{
 border-left:1px solid #ffc04b;
 font-size:1.3em;
 font-weight:normal;
}
.dialog .right p{
 border-left:1px solid #ffc04b;
 font-size:1em;
}
.dialog .coupon .desc .name{
  font-size: 1.3em;
  display: block;
}
.dialog .coupon .desc .time{
  font-size: 1.2em;
  display: block;
  color: #a0a097;
}
.dialog .circle{
  position:absolute;
  width:30px;
  height:30px;
  border-radius:50%;
  background-color:#fff;
  color:#ffd27f;
  line-height:30px;
  text-align:center;
  font-size:1.7em;
  font-weight:bold;
  bottom:-4px;
  left:-3px;
}
.dialog .fr{  
  background-image: url("css/images/check.png");
  background-position: -19px center;
  background-repeat: no-repeat;
  background-size: 34px auto;
  margin:0 1em;
  width: 15px;
  display: block; 
  height: 50px; 
  float:left;
}
.dialog .fr.checked{
  background-position: 0 center;
} 
.btn-wrap{ 
  padding: 8px 82px;
  border-top: 1px solid #fb451f;
}
.dialog-btn{ 
  font-size: 1.6em;
  color: #fff;
  text-decoration: none;
  display: block; 
  background-color: #fb451f;
  height: 30px;
  line-height: 30px;
  text-align: center;
}
.close {
    cursor: pointer;
    display: inline-block;
    height: 28px;
    position: absolute;
    right: 10px;
    top: 10px;
    width: 28px;
    z-index: 10;
}
.close label::before {
    border-right: 1px solid #fc5d3c;
    content: "";
    display: inline-block;
    height: 28px;
    transform: rotate(45deg);
	-ms-transform:rotate(45deg);   
    -moz-transform:rotate(45deg); 
    -webkit-transform:rotate(45deg);  
    -o-transform:rotate(45deg); 
    width: 1px;
}
.close label::after {
    border-left: 1px solid #fc5d3c;
    content: "";
    display: inline-block;
    height: 28px;
    transform: rotate(-45deg);
	-ms-transform:rotate(-45deg);   
    -moz-transform:rotate(-45deg); 
    -webkit-transform:rotate(-45deg);  
    -o-transform:rotate(-45deg); 
    width: 1px;
}
.close label {
    display: inline-block;
    margin-left: 10px;
}
</style>
<body> 
  <article class="order-wrap"> 
    <h1><span class="serviceName" id="serviceName"></span><br/>
       <!--span class="serviceName">879M—XXD系列</span><br/-->
       <span class="price">¥120</span>
    </h1> 
    <div class="shop"><p><span id="businessName"></span><br/><span id="businessAddress"></span></p></div>
    <div class="user"><p><span id="nickName"></span><br/><span id="mobile"></span></p></div> 
  </article>
	
  <h1 class="ui-tit"><span>代金券</span></h1><span  class="more">选择代金券</span>
  <article class="ii-wrap" style="padding-bottom: 10px;">
		<p class="ii">累积使用<span class="org">3</span>张代金券共抵用<span class="org">¥50</span></p>
		<p class="ii-info">代金券抵用超过订单价格，还需要支付1元才能下单成功</p>
  </article> 
  <h1 class="ui-tit"><span>使用账户余额</span><span class="flip-switch"><label></label></span></h1>
  <article class="ii-wrap">
    <p class="ii">账户余额 ¥660.00   本次使用<span class="org">¥1.00</span></p>
  </article> 
	<article class="pay-wrap">
		<h1 class="ui-tit"><span>支付方式</span></h1><span  class="more">选择支付方式</span>
		<p class="info zfb" type="3"><span class="fl"><label>需要拥有支付宝账号</label></span><span class="fr checked"></span></p>
		<p class="info wx" type="1"><span class="fl"><label>推荐安装微信5.0版本以上</label></span><span class="fr"></span></p>
  </article> 
  <ol class="comment">
      <li>未接受服务前，可以随时申请退款；</li>
      <li>30天内未前往商家接受服务，自动退款；</li>
      <li>在线支付订单，出现质量问题优先赔付。</li>
      <li>注意</li>
  </ol>
  <footer>
      <div class="button-wrap two-btn"> 
       <div class="left"><p>代金券¥50  余额¥1.00<br/><strong>需支付：<span class="org">¥69</span></strong></p></div>
         <div class="right"><div class="button">立即支付</div></div>
      </div> 
  </footer>
 
<div class="dialog" style="display:none;">
	<div class="dialog-content">
	<span class="close"><label></label></span>
	<h1 class="title">可选代金券</h1>
	<ul>
		<li class="coupon">
		  <span class="fr"></span>
		  <div class="desc">
		    <div>
		    <div class="left">
			<h1>养车宝1周年活动代金券</h1>
			<p>2014.6.8－2015.7.8</p>
			<p>养车宝官方</p>
			</div>
			<div class="right">
			<h1>¥50</h1> 
			<p>满500可用</p>
			</div>
			</div>
			<span class="circle">￥</span>
		  </div> 
		</li> 
		<li class="coupon">
		  <span class="fr checked"></span>
		  <div class="desc">
		    <div>
		    <div class="left">
			<h1>养车宝1周年活动代金券</h1>
			<p>2014.6.8－2015.7.8</p>
			<p>养车宝官方</p>
			</div>
			<div class="right">
			<h1>¥50</h1> 
			<p>满500可用</p>
			</div>
			</div>
			<span class="circle">￥</span>
		  </div> 
		</li> 
	</ul>
	<div class="btn-wrap"><a href="javascript:void(0)" class="dialog-btn">确定</a></div>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function(){
    $(".flip-switch").click(function(){
      if($(this).hasClass("close")){
        $(this).removeClass("close")
      }else{
        $(this).addClass("close")
      }
    });
	$(".dialog").on('click','li',function(){
       var fr = $(this).children(".fr");
	   
    });
	var url =window.location.search;  
    var paramJson = {};
    if(url!=undefined&&url!=""){
        var paramsArr = (url.split("?")[1]).split("&"); 
        $.each(paramsArr,function(i){
         var item = paramsArr[i].split("=");
         paramJson[item[0]] = item[1];
        });    
    }    
	index.init = function(userInfo){   
	    paramJson.customerId = userInfo.customerId; 
		alertTasat(paramJson.customerId);
		//alertTasat(paramJson.sourceId);
		//alertTasat(paramJson.itemType);
		reserve();
	}; 
	function reserve(){ 
          var postData = {};
          postData.customerId = paramJson.customerId;
          postData.sourceId = paramJson.sourceId;
          postData.itemType = paramJson.itemType;  
          $.ajax({
            url: '/yangchebao-app-ws/ws/0.1/coupon/reserve',
            contentType : "application/json;charset=utf-8",
            dataType : "json",
            type : "POST",
            data : $.toJSON(postData), 
            success: function(data) {    
                 paramJson.mcoupon = data.coupon-data.couponPrice;
                 paramJson.mcash = data.couponCashPrice;
                 $("#serviceName").html(data.serviceName);
                 $(".price").html(data.couponPrice+"元抵用券+"+data.couponCashPrice+"元现金");
                 $("#businessName").html(data.businessName);
                 $("#businessAddress").html(data.businessAddress);
                 $("#nickName").html(data.nickName);
                 $("#mobile").html(data.mobile);
                 $(".coupon").html("￥"+data.coupon);
                 $("#balance").html("￥"+(parseInt(data.coupon)-parseInt(data.couponPrice))); 
                 $(".couponCashPrice").html(data.couponCashPrice+"元"); 
                 if(data.couponPrice>data.coupon){
                   $("#rechargeWrap").show(); 
                 }else{
                   $("#topayWrap").show();
                   $("#commentWrap").show(); 
                 }  
              },error:function(xhr){  
              }
          });  
    } 
  });
</script>
</body>
</html>