<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=yes" />
	<meta content="yes" name="apple-mobile-web-app-capable"/>
	<meta content="black" name="apple-mobile-web-app-status-bar-style"/> 
	<script src="http://app.yangchebao.com.cn/group1/M00/00/9F/jquery-1.9.1.min.00000000000000.js "></script> 
    <script src="http://app.yangchebao.com.cn/group1/M00/00/9F/md50000000000000000000000000000.js"></script>
    <script language="javascript" src="./js/jquery.json-2.2.js"></script> 
    <script src="js/commen.js"></script>
    <link rel="stylesheet" href="css/commen.css">
	<title>完善车辆信息</title>
	<style>
		*{
			margin: 0;
			padding: 0;
			list-style: none;
		}
		body{
			background-color: #f4f7f8;
			font-size: 62.5%;
			font-family: 'Hiragino Sans GB',Helvetica,Arial,sans-serif;
			color: #1e1e1e;
		}
		img{
			border: none;
			vertical-align: middle;
		}
		a{
			text-decoration: none;
			outline:none;
			blr:expression(this.onFocus=this.blur());
		}

		div.container{
			background-color: #fff;
			position: relative;
			min-width: 320px;
			max-width: 640px;
			margin: 0 auto;
		}
		header{
			padding-top: 0.8rem;
			margin-bottom: 1.1rem;
		}
		header nav ul{
			width: 95%;
			margin: auto;
			overflow: hidden;
		}
		header nav ul li{
			float: left;
		}
		header nav ul li img{
			width: 100%;
		}
		header nav ul li.carSafe_step1{
			width: 34.76%;
		}
		header nav ul li.carSafe_step2{
			width: 25.09%;
		}
		header nav ul li.carSafe_step3{
			width: 25.09%;
		}
		header nav ul li.carSafe_step4{
			width: 14.96%;
		}

		div.line{
			border-top: 1px solid #d9d9e2;
			background-color: #F2F3F4;
			height: 1rem;
		}
		section{
			margin-top: 1.6rem;
		}
		section article div.title span{
			color: #1e1e1e;
			font-size: 1rem;
		}
		section article div.title{
			margin-bottom: 0.3rem;
		}
		section article{
			width: 90%;
			margin: 0 auto 1.1rem;
		}
		div.driveCity-detail p{
			border: 1px solid #d9d9e2;
			-webkit-border-radius:5px;
			-moz-border-radius:5px;
			border-radius:5px;
			padding: 0 0.5rem;
			cursor: pointer;
			line-height: 2.2rem;
		}
		div.driveCity-detail p span.spanCity{
			font-size: 1rem;
		}
		div.driveCity-detail p span.spanImg{
			margin-right: 0.6rem;
		}
		div.driveCity-detail p span.spanImg img{
			width: 0.9rem;
			margin-top: -0.4rem;
		}
		span.driveCity-title-left{
			float: left;
		}
		p.carNumber-title-right{
			float: right;
			text-align: right;
		}
		p.carNumber-title-right img{
			width: 4rem;
			margin-left: 0.7rem;
			margin-top: -0.4rem;
			cursor: pointer;
		}
		div.carNumber-detail{
			overflow: hidden;
		}
		p.carNumberCity{
			width: 25%;
			float: left;
			border: 1px solid #d9d9e2;
			-webkit-border-radius:5px;
			-moz-border-radius:5px;
			border-radius:5px;
			padding: 0.5rem;
			cursor: pointer;
		}
		p.carNumberCity span.carNumberCity-text{
			font-size: 1rem;
		}
		input.carNumber{
			width: 60%;
			float: right;
			border: 1px solid #d9d9e2;
			-webkit-border-radius:5px;
			-moz-border-radius:5px;
			border-radius:5px;
			padding: 0.6rem 0.5rem;
			font-size: 1rem;
			font-family: 'Hiragino Sans GB',Helvetica,Arial,sans-serif;
			background-color: transparent;
		}
		p.carNumberCity img{
			width: 1.5rem;
			float: right;
			position: relative;
			top: 0.2rem;
		}
		input.carHolder-name{
			width: 95%;
			border: 1px solid #d9d9e2;
			-webkit-border-radius:5px;
			-moz-border-radius:5px;
			border-radius:5px;
			padding: 0.6rem 0.5rem;
			font-size: 1rem;
			font-family: 'Hiragino Sans GB',Helvetica,Arial,sans-serif;
			background-color: transparent;
		}
		div.next{
			border-top: 1px solid #DCDCE4;
			background-color: #f4f7f8;
			text-align: center;
			padding-top: 1rem;
			padding-bottom: 4rem;
		}
		p.nextBtn{
			/*margin: 0 0 3rem 0;*/
			-webkit-border-radius:8px;
			-moz-border-radius:8px;
			border-radius:8px;
			background:#ff6138;
			width: 92%;
			margin: 0 auto;
			color: #fff;
			font-size: 1.4rem;
			line-height: 3rem;
			cursor: pointer;
		}
		/*选择城市*/
		div.selectCity{
			position: absolute;
			top: 0;
			width: 100%;
			z-index: 100;
		}
		div.selectCity-title{
			position: absolute;
			-webkit-box-sizing:border-box;
			-moz-box-sizing:border-box;
			box-sizing:border-box;
			background-color: #FF6138;
			color: #fff;
			font-size: 1.2rem;
			line-height: 3rem;
			padding: 0 1rem;
			overflow: hidden;
			top: 0;
			width: 100%;
			z-index: 103;
		}
		div.selectCity-title p{
			float: left;
		}
		div.selectCity-title img{
			float: right;
			position: relative;
			top: 0.75rem;
			width: 1.4rem;
			cursor: pointer;
		}
		div.selectCity-main{
			margin-top: 2.9rem;
		}
		article.hotCitys{
			padding: 1rem;
			background-color: #F2F3F4;
		}
		p.hotCitys-title{
			color: #a2a2a2;
			font-size: 1rem;
		}
		div.hotCitys-con{
			margin-top: 1rem;
		}
		ul.hotCitys-ul{
			overflow: hidden;
		}
		ul.hotCitys-ul li{
			float: left;
			width: 22%;
			margin-right: 3%;
			text-align: center;
			border: 1px solid #bcbebd;
			background-color: #fff;
			line-height: 2rem;
			font-size: 1rem;
			margin-bottom: 0.7rem;
			cursor: pointer;
		}
		ul.hotCitys-ul li:nth-of-type(4n){
			margin-right: 0!important;
		}
		div.allCitys-wraper{
			position: relative;
		}
		article.allCitys{
			background-color: #fff;
		}
		ul.allCitys-ul li{
			border-bottom: 1px solid #bcbebd;
		}
		div.allCitys-letter{
			background-color: #F2F3F4;
			border-bottom: 1px solid #bcbebd;
			color: #c2c2c6;
			font-size: 1.2rem;
			line-height: 2.2rem;
			padding: 0 1.2rem;
		}
		div.allCitys-detail p{
			margin-left: 3rem;
			font-size: 1rem;
			line-height: 4rem;
			border-bottom: 1px solid #bcbebd;
			cursor: pointer;
		}
		div.allCitys-detail p:last-child{
			border-bottom: none!important;
		}
		article.allCitys-letters{
			position: absolute;
			top:3rem;
			right: 0;
			z-index: 200;
		}
		p.allCitys-letters-p{
			text-align: right;
		}
		article.allCitys-letters span{
			display: inline-block;
			margin: 0.06rem 0.3rem;
			color:#4172a2;
			font-size: 0.7rem;
			font-weight: bold;
			cursor: pointer;
		}

		div.overLay{
			position: absolute;
			top: 0;
			z-index: 100;
			width: 100%;
			background-color: #000;
			opacity: 0.6;
			filter:alpha(opacity=60);
		}
		div.carArea{
			position: absolute;
			top: 1rem;
			z-index: 200;
			width: 90%;
			/*height: 100%;*/
			padding: 0 5%;
		}
		div.carArea-close{
			text-align: right;
		}
		div.carArea-close canvas{
			cursor: pointer;
		}
		ul.carArea-detail-ul{
			overflow: hidden;
		}
		ul.carArea-detail-ul li{
			float: left;
			width: 16%;
			margin-right: 5%;
			text-align: center;
			margin-top: 1rem;
		}
		ul.carArea-detail-ul li:nth-of-type(5n){
			margin-right: 0!important;
		}
		ul.carArea-detail-ul li p{
			border: 1px solid #fff;
			-webkit-border-radius: 5px;
			-moz-border-radius: 5px;
			border-radius: 5px;
			font-size: 1.5rem;
			color: #fff;
			line-height: 3rem;
			cursor: pointer;
		}
		/*loading*/
		div.selectCity-loading-img{
			width: 50%;
			margin: 100px auto 0;
			text-align: center;
		}
		div.selectCity-loading-img img{
			width: 100%;
		}
		p.selectCity-loading-text{
			font-size: 1rem;
			color: #A2A2A2;
			text-align: center;
			margin-top: 1.2rem;
		}
		div.goBack{
			overflow: hidden;
		}
		p.goBackBtn{
			background-color: #88b8e2;
			color: #fff;
			font-size: 1rem;
			width: 80px;
			text-align: center;
			line-height: 28px;
			-webkit-border-radius: 3px;
			-moz-border-radius: 3px;
			border-radius: 3px;
			margin: 0.5rem 2% 0;
			cursor: pointer;
			float: right;
		}
	</style>
</head>
<body>
	<div class="container">
    	<div class="overLay" style="display:none;"></div>
		<header>
			<nav>
				<ul>
					<li class="carSafe_step1"><img src="img/carSafe_step1.png"></li>
					<li class="carSafe_step2"><img src="img/carSafe_stepGray2.png"></li>
					<li class="carSafe_step3"><img src="img/carSafe_stepGray3.png"></li>
					<li class="carSafe_step4"><img src="img/carSafe_stepGray4.png"></li>
				</ul>
			</nav>
		</header>
		<div class="line"></div>
		<!-- <div class="goBack"><p class="goBackBtn"><返回</p></div> -->
		<section>
			<article class="driveCity">
				<div class="title driveCity-title"><span>行驶城市</span></div>
				<div class="detail driveCity-detail"><p><span class="spanImg"><img src="img/located_icon.png"></span><span class="spanCity" name="cityName" id=""></span></p></div>
			</article>
			<article class="carNumber">
				<div class="title carNumber-title"><span class="carNumber-title-left">车牌号</span><p class="carNumber-title-right"><span>新车未上牌</span><img src="img/noNewCar.png" class="isNewCar"></p><div style="clear:both;"></div></div>
				<div class="detail carNumber-detail">
					<p class="carNumberCity"><span class="carNumberCity-text" name="carNumberCity">京</span><span><img src="img/carNumber_select.png"></span></p>
					<input class="carNumber" type="text" name="plateNo" />
				</div>
			</article>
			<article class="carHolder">
				<div class="title carHolder-title"><span>车主姓名</span></div>
				<div class="detail carHolder-detail"><input class="carHolder-name" type="text" name="ownerName" /></div>
			</article>
			<div class="next">
				<p class="nextBtn">下一步</p>
			</div>
		</section>
		<div class="carArea" style="display:none;">
			<div class="carArea-close"><canvas width="22px" height="22px" id="canvas"></canvas></div>
			<script type="text/javascript">
				var canvas=document.getElementById('canvas');
				var cxt=canvas.getContext('2d');
				cxt.beginPath();
				cxt.lineWidth=2;
				cxt.strokeStyle="#ff6138";
				cxt.moveTo(0,0);
				cxt.lineTo(22,22);
				cxt.stroke();
				cxt.closePath();
				cxt.beginPath();
				cxt.lineWidth=2;
				cxt.strokeStyle="#ff6138";
				cxt.moveTo(22,0);
				cxt.lineTo(0,22);
				cxt.stroke();
				cxt.closePath();
			</script>
			<div class="carArea-detail">
				<ul class="carArea-detail-ul">
					<li class="carArea-detail-li"><p>京</p></li>
					<li class="carArea-detail-li"><p>沪</p></li>
					<li class="carArea-detail-li"><p>粤</p></li>
					<li class="carArea-detail-li"><p>苏</p></li>
					<li class="carArea-detail-li"><p>浙</p></li>
					<li class="carArea-detail-li"><p>鲁</p></li>
					<li class="carArea-detail-li"><p>晋</p></li>
					<li class="carArea-detail-li"><p>冀</p></li>
					<li class="carArea-detail-li"><p>豫</p></li>
					<li class="carArea-detail-li"><p>川</p></li>
					<li class="carArea-detail-li"><p>渝</p></li>
					<li class="carArea-detail-li"><p>辽</p></li>
					<li class="carArea-detail-li"><p>吉</p></li>
					<li class="carArea-detail-li"><p>黑</p></li>
					<li class="carArea-detail-li"><p>皖</p></li>
					<li class="carArea-detail-li"><p>鄂</p></li>
					<li class="carArea-detail-li"><p>湘</p></li>
					<li class="carArea-detail-li"><p>赣</p></li>
					<li class="carArea-detail-li"><p>闽</p></li>
					<li class="carArea-detail-li"><p>陕</p></li>
					<li class="carArea-detail-li"><p>甘</p></li>
					<li class="carArea-detail-li"><p>宁</p></li>
					<li class="carArea-detail-li"><p>蒙</p></li>
					<li class="carArea-detail-li"><p>津</p></li>
					<li class="carArea-detail-li"><p>贵</p></li>
					<li class="carArea-detail-li"><p>云</p></li>
					<li class="carArea-detail-li"><p>贵</p></li>
					<li class="carArea-detail-li"><p>琼</p></li>
					<li class="carArea-detail-li"><p>青</p></li>
					<li class="carArea-detail-li"><p>新</p></li>
					<li class="carArea-detail-li"><p>藏</p></li>
				</ul>
			</div>
		</div>
		<div class="selectCity" style="display:none;">
			<div class="selectCity-title"><p>选择城市</p><img src="img/closeCity_icon.png"></div>
			<div class="selectCity-loading">
				<div class="selectCity-loading-main">
					<div class="selectCity-loading-img"><img src="img/selectCity_load.gif" id="img"></div>
					<p class="selectCity-loading-text">正在获取城市······</p>
				</div>
			</div>
			<div class="selectCity-main" style="position:relative;display:none;">
				<article class="hotCitys">
					<p class="hotCitys-title">热门城市</p>
					<div class="hotCitys-con">
						<ul class="hotCitys-ul">
							<!-- <li>北京</li>
							<li>北京</li>
							<li>北京</li>
							<li>北京</li>
							<li>北京</li>
							<li>北京</li>
							<li>北京</li> -->
						</ul>
					</div>
				</article>
				<div class="allCitys-wraper">
					<article class="allCitys">
						<ul class="allCitys-ul">
							<!-- <li>
								<div class="allCitys-letter" id="A">A</div>
								<div class="allCitys-detail">
									<p>阿拉善盟</p>
									<p>鞍山市</p>
									<p>安庆市</p>
									<p class="city-last">安阳市</p>
								</div>
							</li>
							<li>
								<div class="allCitys-letter" id="B">B</div>
								<div class="allCitys-detail">
									<p>阿拉善盟</p>
									<p>鞍山市</p>
									<p>安庆市</p>
									<p class="city-last">安阳市</p>
								</div>
							</li>
							<li>
								<div class="allCitys-letter" id="C">C</div>
								<div class="allCitys-detail">
									<p>阿拉善盟</p>
									<p>鞍山市</p>
									<p>安庆市</p>
									<p class="city-last">安阳市</p>
								</div>
							</li>
							<li>
								<div class="allCitys-letter" id="D">D</div>
								<div class="allCitys-detail">
									<p>阿拉善盟</p>
									<p>鞍山市</p>
									<p>安庆市</p>
									<p class="city-last">安阳市</p>
								</div>
							</li>
							<li>
								<div class="allCitys-letter" id="E">E</div>
								<div class="allCitys-detail">
									<p>阿拉善盟</p>
									<p>鞍山市</p>
									<p>安庆市</p>
									<p class="city-last">安阳市</p>
								</div>
							</li>
							<li>
								<div class="allCitys-letter" id="F">F</div>
								<div class="allCitys-detail">
									<p>阿拉善盟</p>
									<p>鞍山市</p>
									<p>安庆市</p>
									<p class="city-last">安阳市</p>
								</div>
							</li> -->
						</ul>
					</article>
				</div>
			</div>
			<article class="allCitys-letters" style="display:none;">
				<p class="allCitys-letters-p">
					<span>A</span><br />
					<span>B</span><br />
					<span>C</span><br />
					<span>D</span><br />
					<span>E</span><br />
					<span>F</span><br />
					<span>G</span><br />
					<span>H</span><br />
					<span>I</span><br />
					<span>J</span><br />
					<span>K</span><br />
					<span>L</span><br />
					<span>M</span><br />
					<span>N</span><br />
					<span>O</span><br />
					<span>P</span><br />
					<span>Q</span><br />
					<span>R</span><br />
					<span>S</span><br />
					<span>T</span><br />
					<span>U</span><br />
					<span>V</span><br />
					<span>W</span><br />
					<span>X</span><br />
					<span>Y</span><br />
					<span>Z</span><br />
				</p>
			</article>
		</div>
	</div>
</body>
<script type="text/javascript">
	$(function(){
		// 获取参数
		var url = window.location.search; 
	    var paramJson = {};
	    if(url!=''){
	    	var paramsArr = (url.split("?")[1]).split("&");
		    $.each(paramsArr,function(i){
		        var item = paramsArr[i].split("=");
		        paramJson[item[0]] = item[1]
		    });
	    }

		
		// 遮罩层自适应高度
		var bodyHeight=$('body').height();
		var windowHeight=window.screen.availHeight;
		if(bodyHeight>windowHeight){
			$('div.overLay').css('height',bodyHeight)
		}else{
			$('div.overLay').css('height',windowHeight)
		}
		// 是否新车
		$('img.isNewCar').unbind('click').bind('click',function(){
			if($(this).attr('src')=='img/noNewCar.png'){
				$(this).attr('src','img/isNewCar.png');
				$('div.carNumber-detail').hide()
			}else{
				$(this).attr('src','img/noNewCar.png');
				$('div.carNumber-detail').show()
			}
		});
		// 车牌城市
		$('article.carNumber p.carNumberCity').unbind('click').bind('click',function(){
			$('div.carArea').show();
			$('div.overLay').show();
			window.scrollTo(0,0);
			$('canvas#canvas').unbind('click').bind('click',function(){
				$('div.carArea').hide();
				$('div.overLay').hide()
			});
			$('ul.carArea-detail-ul li p').unbind('click').bind('click',function(){
				$('p.carNumberCity span.carNumberCity-text').html($(this).html());
				$('div.carArea').hide();
				$('div.overLay').hide()
			})
		});

		// 自动定位
		// var _baiduAPI='http://api.map.baidu.com/geocoder/v2/?ak=i7h7GCkoXrYtPmetBTq5I3dN&location=';
		// var autoCityName='';
		// var autoCityId='';
		// if(!autoCityName){
		// 	if(!getLocalStorage('cityName')){
		// 		if(navigator.geolocation){
		// 			var locationSuccess=function(position){
		// 					var coords=position.coords;
		// 					console.log(coords);
		// 					if(position.address!=undefined){
		// 						autoCityName=position.address.city
		// 					}else{
		// 						autoCityName=getCity(_baiduAPI,coords)
		// 					}
		// 			};
		// 			var locationError=function(error){
		// 				switch (error.code){
		// 					case error.TIMEOUT:
		// 						console.log('A timeout occured! Please try again!');
		// 						break;
		// 					case error.POSITION_UNAVAILABLE:
  //                               console.log('We can\'t detect your location. Sorry!');
  //                               break;
  //                           case error.PERMISSION_DENIED:
  //                               console.log('Please allow geolocation access for this to work.');
  //                               break;
  //                           case error.UNKNOWN_ERROR:
  //                               console.log('An unknown error occured!');
  //                               break;
		// 				};
		// 				autoCityName='自动获取失败'
		// 			};
		// 			navigator.geolocation.getCurrentPosition(locationSuccess,locationError,{
		// 				// 指示浏览器获取高精度的位置，默认为false
  //                       enableHighAcuracy: true,
  //                       // 指定获取地理位置的超时时间，默认不限时，单位为毫秒
  //                       timeout: 30000,
  //                       // 最长有效期，在重复获取地理位置时，此参数指定多久再次获取位置。
  //                       maximumAge: 3000
		// 			})
					
		// 		}else{
		// 			alert("Your browser does not support Geolocation!");
  //                   autoCityName = '抱歉，您的浏览器不支持自动获取功能'
		// 		}
		// 	}
		// }

		// function getCity(url,coords){
		// 	$.ajax({
		// 		url:url+coords.latitude+','+coords.longitude+'&output=json',
		// 		dataType:'jsonp'
		// 	}).then(function(data){
		// 		autoCityName=data.addressComponent.city;
		// 		$.ajax({
		// 			url:'/yangchebao-app-ws/ws/0.1/insure/region/queryAll',
		// 			type:'get',
		// 			async:false,
		// 			dataType:'json',
		// 			contentType:'application/json;charset=utf-8'
		// 		}).then(function(data){
		// 			data['regions'].forEach(function(province,id){
		// 				if(province['municipality'] || province['special']){
		// 					iniAutoCity(autoCityName,province);
		// 					return false
		// 				}
		// 				if(!province.regions || !province.regions.length){
		// 					return false
		// 				}
		// 				province['regions'].forEach(function(city,i){
		// 					iniAutoCity(autoCityName,city)
		// 				})
		// 			})
		// 		});
		// 		$('span.spanCity').html(autoCityName);
		// 		setLocalStorage('cityName',autoCityName)
		// 	});
		// 	return autoCityName
		// };

		// function iniAutoCity(autoCityName,city){
		// 	if(autoCityName&&autoCityName==city.name){
		// 		$('span.spanCity').attr('city-id',city.id)
		// 	}
		// };

		
		// 行驶城市
		$('div.driveCity-detail p').unbind('click').bind('click',function(){
			$('div.selectCity').show();
			$('section,header,div.line').hide();
			
			$.ajax({
				url:'/yangchebao-app-ws/ws/0.1/insure/region/queryAll',
				type:'get',
				dataType:'json',
				contentType:'application/json;charset=utf-8',
				// beforeSend:function(){
				// 	// clearInterval(autoRotate);
				// 	// 图片旋转
				// 	function getName(){ //获取浏览器名
				//         if(navigator.userAgent.indexOf("MSIE")>0) { return "MSIE";}
				//         if(isFirefox=navigator.userAgent.indexOf("Firefox")>0){return "Firefox";}
				//         if(isSafari=navigator.userAgent.indexOf("Safari")>0) { return "Safari";}
				//         if(isCamino=navigator.userAgent.indexOf("Camino")>0){return "Camino";}
				//         if(isMozilla=navigator.userAgent.indexOf("Gecko/")>0){return "Gecko";}
				//     }
				//     var version = getName(),CssCode;
				//     if(version == 'MSIE'){ CssCode = '-ms-';}
				//     if(version == 'Firefox'){ CssCode = '-moz-';}
				//     if(version == 'Safari'){ CssCode = '-webkit-';} //chrome 一样
				//     if(version != 'MSIE' && version != 'Firefox' && version != 'Safari'){ CssCode = '-o-';}//Opera
				// 	var Du = 0;
				//     function fransform(){
				//         Du++;
				//         var Objnode = document.getElementById('img');
				//         Objnode.setAttribute('style',''+CssCode+'transform:rotate('+ Du +'deg); '+CssCode+'transform-origin: 50% 50%;');
				//         if(Du == 360){ Du = 0; }
				//     }
				//     autoRotate=setInterval(fransform,10);
				// },
				success:function(data){
					// if(autoRotate){
					// 	clearInterval(autoRotate)
					// }
					$('div.selectCity div.selectCity-loading').hide();
					$('div.selectCity div.selectCity-main').show();
					$('div.selectCity article.allCitys-letters').show();
					if(!data.regions||data.regions.length==0) return false;
					var hotCity_str='';
					var letterCity_str='';
					// 城市首字母
					var firstLetterList={};
					'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').forEach(function(key,id){
						firstLetterList[key]=''
					});
					// 初始化城市列表
					function initCity(province,city,id){
						if(city.pinyin){
							var firstLetter=city.pinyin.charAt(0).toUpperCase();
						}else{
							var firstLetter=province.pinyin.charAt(0).toUpperCase();
						}
						
						firstLetterList[firstLetter]+='<p data-id='+city.id+' pro-id='+id+'>'+city.name+'</p>';
						if(city['hot']){
							hotCity_str+='<li data-id='+city.id+' pro-id='+id+'>'+city.name+'</li>';
							return false
						}
						if(province['hot']){
							hotCity_str+='<li data-id='+city.id+' pro-id='+id+'>'+city.name+'</li>';
							return false
						}
					}
					data['regions'].forEach(function(province,i){
						var proId=province.id;
						if(province['special']){
							initCity('',province,proId);
							return false
						}
						if(!province.regions||!province.regions.length) return false;
						province['regions'].forEach(function(city,j){
							initCity(province,city,proId)
						})
					});

					$.each(firstLetterList,function(key,val){
						if(val=='') return true;
						letterCity_str+='<li>'
						               +'<div class="allCitys-letter" id="'+key+'">'+key+'</div>'
						               +'<div class="allCitys-detail">'+val+'</div>'
						               +'</li>'
					});

					// 写入
					$('ul.allCitys-ul').html(letterCity_str);
					$('ul.hotCitys-ul').html(hotCity_str);

					// 滚动 点击
					var _windowHeight=window.innerHeight-$('div.selectCity-title').outerHeight();
					$('div.selectCity-main').css({'height':_windowHeight,'overflow':'auto'});
					$('div.selectCity-main').scrollTop(0);
					$('div.selectCity-title img').unbind('click').bind('click',function(){
						$('div.selectCity div.selectCity-loading').show();
						$('div.selectCity div.selectCity-main').hide();
						$('div.selectCity article.allCitys-letters').hide();
						$('div.selectCity').hide();
						$('section,header,div.line').show()
					});
					$('ul.hotCitys-ul li,div.allCitys-detail p').unbind('click').bind('click',function(){
						$('div.driveCity-detail p span.spanCity').html($(this).html());
						$('div.driveCity-detail p span.spanCity').attr('id',$(this).attr('data-id'));
						$('div.driveCity-detail p span.spanCity').attr('pro-id',$(this).attr('pro-id'));
						$('div.selectCity div.selectCity-loading').show();
						$('div.selectCity div.selectCity-main').hide();
						$('div.selectCity article.allCitys-letters').hide();
						$('div.selectCity').hide();
						$('section,header,div.line').show()
					});
					$('p.allCitys-letters-p span').unbind('click').bind('click',function(){
						var _id=$(this).html();
						var _top=$('div#'+_id).position().top;
						$('div.selectCity-main').scrollTop($('div#'+_id).position().top+$('article.hotCitys').outerHeight())
					})
				}

			});
			
		});
		//下一步
		$('p.nextBtn').unbind('click').bind('click',function(){
			if($('span.spanCity').html()==''){
				safeAlert(1,'请选择行驶城市','确定','');
				return false
			}
			if(!($('input[name="plateNo"]').is(":hidden"))&&$('input[name="plateNo"]').val()==''){
				safeAlert(1,'请填写车牌号','确定','');
				return false
			}
			if($('input[name="ownerName"]').val()==''){
				safeAlert(1,'请填写车主姓名','确定','');
				return false
			}
			var postData={};
			postData.customerId=paramJson.customerId;
			postData.cityName=$('span[name="cityName"]').html();
			postData.cityId=$('span[name="cityName"]').attr('id');
			postData.provinceId=$('span[name="cityName"]').attr('pro-id');
			if(!($('input[name="plateNo"]').is(":hidden"))){
				postData.plateNo=$('span[name="carNumberCity"]').html()+$('input[name="plateNo"]').val()
			}else{
				postData.plateNo=''
			}
			postData.ownerName=$('input[name="ownerName"]').val();
			$.ajax({
				url:'/yangchebao-app-ws/ws/0.1/insure/car/replace',
				type:'post',
				data:$.toJSON(postData),
				dataType:'json',
				contentType:'application/json;charset=utf-8',
				async:false,
				success:function(data){
					window.location.href="/yangchebao-pubweb/baoxianVip/selectCarBrand.html?provinceId="+postData.provinceId+'&cityId='+postData.cityId+'&customerId='+paramJson.customerId+'&userId='+paramJson.userId
				},
				error:function(xhr){
					var error=eval('('+xhr.responseText+')');
					safeAlert(1,error[0].message,'确定','')
				}
			})
		})
	})
</script>
</html>