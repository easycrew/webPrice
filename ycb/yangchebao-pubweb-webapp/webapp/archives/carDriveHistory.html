<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black" name="apple-mobile-web-app-status-bar-style"/>
<meta name="format-detection" content="telephone=no" />
<script src="../js/jquery-1.9.1.min.js"></script> 
<script src="js/index.js"></script> 
<script src="js/commen.js"></script> 
<link rel="stylesheet" href="./css/calender.css">
<link rel="stylesheet" href="http://app.yangchebao.com.cn/group1/M00/00/9F/swiper.min.0000000000000000000.css"> 
<title>驾驶奖励</title>
<style type="text/css">
*{
	margin: 0;
	padding: 0;
	-webkit-tap-highlight-color:rgba(0,0,0,0);
}
html{
	font-size:62.5%;
}
body{
	background-color: #F4F7F8;
	font-family:'华文细黑','HelveticaNeue-Light'; 
	color:#1e1e1e;
	-webkit-box-sizing:border-box;
	box-sizing:border-box;
}
body,html{
	min-height:100%;
}
ol{
	list-style: none;
}
img{
	border:none;
}
.clearfix {
   *zoom: 1;
}
.clearfix:before,
.clearfix:after {
   display: table;
   line-height: 0;
   content: "";
}
.clearfix:after {
  clear: both;
} 
a{
	text-decoration: none;
} 
ul,ol{
	list-style: none;
}
.tabs{
	padding: 1.5rem 2rem;
	height: 3.4rem;
	line-height: 3.4rem;
	text-align: center;
	font-size: 1.4rem;
}
.tabs span{
	display: block;
	width: 50%;
	float: left;
	box-sizing:border-box;
}

.tabs span{ 
	color:#FB451F;
	background-color: #fff;
	border:1px solid #FB451F; 
}
.tabs span.current{ 
	color:#FFFFFF;
	background-color: #FB451F; 
}
.tabs .ltab{  
	border-radius: 18px 0 0 18px;
}
.tabs .ftab{  
	border-radius: 0 18px 18px 0;
} 
.title{
	font-size:1.2rem;
	color:#A2A2A2; 
	text-align:center;
	padding: 0.5rem 0;
} 
.glist{
	display: table;
	width: 100%;
	background-color: #fff;
}
.glist li{
	display: table-row;  
}
.glist li>div{
	display: table-cell;
	vertical-align: middle; 
	text-align: center;
	border-bottom:1px solid #C2C2C6; 
	padding:2rem 0; 
}
.glist li>div:first-child{ 
	text-align: left;
	padding-left: 1.5rem;
	position: relative;
} 
.glist li>div:last-child{ 
	padding-right: 1.5rem; 
} 
.glist .info{
	font-size: 1.5rem;
}
.glist label{
	font-size: 1.2rem; 
    color:#C2C2C6; 
    display: block;
} 
.glist li>div:first-child label{
	padding-left: 30px; 
} 
.glist img{
	left: 135px;
    position: absolute;
    top: 1.8rem;
    width: 1.7rem;
} 
.idx {
    display: inline-block;
    width: 30px;
}
.date-wrap{
	background-color: #fff;
	text-align: center; 
	padding: 1.8rem 1.5rem;
	border-bottom:1px solid #C2C2C6;  
	margin-bottom: 1rem;
}
.date-wrap h1{ 
	color:#6EAADE; 
	font-weight: normal;
	font-size:1.4rem;
	border-bottom: 1px solid #6EAADE; 
	padding-bottom: 1.1rem;
	margin-bottom: 1.1rem;
	position: relative;  
}
.date-wrap h2{
	font-size:10vw;   
	font-weight: normal;
	color: #FF6138;
} 
.date-wrap h3{
	font-size:1.4rem;   
	font-weight: normal;
} 
.arrow
{  
  display:block;  
  height:0px;  
  width:0px;  
  position:absolute;  
  font-size:0;   
  top:6px;    /* 它的绝对值加上span的边框宽度等于div边框宽度的5倍 */  
  left:50%;   /* 它来确定尖角的位置 */  
  margin-left: 70px;
  border-top:0px;  
  border-top:6px solid #6EAADE;  /* 注意颜色的变化 */  
  border-right:6px solid white;  
  border-left:6px solid white;  
}  
.hlist li{
	 border-bottom: 1px solid #c2c2c6;
	 background-color: #fff;
	 margin-bottom: 1rem;
	 font-size:1.2rem;  
	 padding: 2rem 1.5rem 1.5rem; 
}
.hlist h1{ 
	font-weight: normal;
	font-size: 1.2rem;
	border-bottom: 1px solid #c2c2c6;
	padding: 0.7rem 0 0.7rem 2rem;
	margin-bottom: 2rem;
	background-image: url(images/dicon.png);
	background-size: 1.5rem auto;
	background-repeat: no-repeat;
	background-position: left 0.7rem;  
}
.hlist p{  
	line-height: 150%;
}
.hlist p span{  
	color:#FF6138;  
}
.hlist p strong{  
	font-weight: normal;
	font-size: 1.4rem;
}
.dateHtml{
    position:absolute;
	width:100%;
	left:0;
	display:none;
	z-index:200;
	background-color:#fff;
}
.bottom-btn{
    height:4.4rem;
	text-align:center;
	color:#fff;
	width:100%;
	display:block;
	position:fixed;
	bottom:0;
	background-color:#FF6138;
	line-height:4.4rem;
	font-size:1.6rem;
}
header{
	font-size: 1.2rem; 
	padding: 0 3rem; 
	border-bottom:1px solid #d9d9e2;
	margin-bottom: 1rem;
	background-color: #fff;
}
header .box-wrap{ 
	border-bottom:1px solid #C2C2C6; 
	height: auto;
	overflow: auto; 
	padding: 3rem 0 2rem; 
}
header .left{
	float: left;
	width: 13rem; 
}
header .left img{
	display: block;
	width: 10.5rem;
	margin-left: 0.5rem;
}
header .right{
	margin-left: 7.6rem;
	padding-top: 0.9rem;
} 
header .right h1{ 
	font-size:1.8rem;
	color:#FF6138; 
	font-weight: normal;
} 
header h2{  
	font-size:1.5rem; 
	text-align:center;
	font-weight: normal;
	padding: 1.4rem 0;
} 
header .btn-wrap{  
	font-size:1.5rem; 
	text-align:center;
	font-weight: normal;
	padding: 0 1.1rem 2rem;
	height: auto;
	overflow: auto; 
} 
header .two-btn>div{  
	 width: 50%;
	 float: left;
}
header .btn-wrap a{  
	font-size:1.4rem;
	color:#FF6138;
	line-height:3rem;
	text-align:center;
	display: block;
	height: 3rem;
	border: 1px solid #FF6138;
	border-radius: 3px;
} 
header .two-btn .lbtn{  
	margin-right: 1rem;
} 
header .two-btn .rbtn{  
	margin-left: 1rem;
}
.date-wrap .secondDate{
	padding-top:1.1rem;
	margin:0;
}
.date-wrap2 .arrow{
	margin-left:90px;
	top:1.6rem;
}
.date-wrap2{
	/**background-color:#F4F7F8; **/
	border:none;
	padding:0;
}

.null-tip::before {
    border-bottom: 1px solid #cfd1db;
    content: "";
    display: inline-block;
    margin-right: 0.5em;
    vertical-align: middle;
    width: 2.4em;
}
.null-tip::after {
    border-bottom: 1px solid #cfd1db;
    content: "";
    display: inline-block;
    margin-left: 0.5em;
    vertical-align: middle;
    width: 2.4em;
}
.null-tip {
    color: #cfd1db;
    display: none;
    font-size: 1.5rem;
    margin-top: 4rem;
    text-align: center;
} 
.tip {
    color: #a0a097;
    cursor: pointer;
    display: none;
    font-size: 1.5em;
    padding: 10px;
    text-align: center;
	padding-bottom:3.6rem;
}
/**错误提示**/
.tasat-wrap{
   position: fixed;
   text-align: center;
   bottom: 50%;
   width: 100%; 
}
.tasat {
	background-color: #000;
	border-radius: 8px;
	color: #fff;
	display: inline-block;
	font-size: 14px;
	margin: 0 20px;
	opacity: 0.8;
	padding: 10px;
} 
.hlist-wrap h1 span{
	float:right;
} 
.hlist-wrap h1 .lqBtn{ 
	font-size:1.6rem;
	color:#fff;
	text-align:center;
	background:#ff6138;
	border-radius:3px; 
	height:2.8rem;
	line-height:2.8rem;
	padding:0 1rem;
	margin-top:-1.2rem;
} 
.maxTip{ 
	font-size:1.4rem;
	color:#ffffff;  
	line-height:150%;
	background-color:#F5A623;
	padding:0.7rem 0.6rem;
	position:fixed;
	bottom:4.4rem;
	width:100%; 
}
.maxTip canvas{
	position:absolute;
	right:2rem;
	top:0.6rem;
}
.hlist-null img{
    width:16%;
	margin:5rem auto 2.5rem;
	display:block;
}
.hlist-null p{ 
	font-size:1.5rem;
	color:#a2a2a2; 
	text-align:center;
} 
.hlist-wrap{
   margin-bottom:5rem;
}
</style>
<body>
	<p><input name="eventId" type="hidden" value="FileDrivingRewardPage"></p>
	<p><input name="rightNavBtnInfo" type="hidden" value="奖励说明" /> 
	<input name="rightNavBtnInfo" type="hidden" value="http://app.yangchebao.com.cn/yangchebao-pubweb/archives/comment.html" /> 
	<input name="rightNavBtnInfo" type="hidden" value="0" /></p>
    <script type="text/javascript">
		function getBasePageInfos(){
         var btnTxt = $("input[name='rightNavBtnInfo']:eq(0)").val();
         var actionUrl = $("input[name='rightNavBtnInfo']:eq(1)").val();
         var isNeedLogin = $("input[name='rightNavBtnInfo']:eq(2)").val();
         var infoJson={};
         infoJson.titleBtnActions=[];
         var btnJson={};
         btnJson.btnTxt=btnTxt;
         btnJson.actionUrl=actionUrl;
         btnJson.isNeedLogin=isNeedLogin;
         infoJson.titleBtnActions.push(btnJson);
         var infoJsonStr=JSON.stringify(infoJson);
         window.shareInfos.getBasePageInfos(infoJsonStr);
        }
	</script>   
	<section class="hlist-wrap">
		<ul class="hlist">
			<!--li>
				<h1>2015年10月05日<span class="txt">已领取</span></h1>
				<p>保险金奖励：<span>+5元</span></p>
				<p>服务奖励：<span><strong>30</strong>元洗车券</span></p>
			</li>
			<li>
				<h1>2015年10月05日<span class="lqBtn">立即领取</span></h1>
				<p>保险金奖励：<span>+5元</span></p>
				<p>服务奖励：<span><strong>30</strong>元洗车券</span></p>
			</li-->
		</ul>  
		<div class="hlist-null" style="display:none;">
		    <img src="images/null.png"/>
			<p>您还没有获奖记录</p> 
		</div> 
		<p class="tip htip">点击查看更多</p>
	</section> 
	<p class="maxTip" style="display:none;">最多可获得300元保险基金＋300元现金奖励<canvas width="22px" height="22px" id="close"></canvas></p> 
	<script type="text/javascript">
		var canvas=document.getElementById('close');
		var cxt=canvas.getContext('2d');
		cxt.beginPath();
		cxt.lineWidth=2;
		cxt.strokeStyle="#fff";
		cxt.moveTo(0,0);
		cxt.lineTo(22,22);
		cxt.stroke();
		cxt.closePath();
		cxt.beginPath();
		cxt.lineWidth=2;
		cxt.strokeStyle="#fff";
		cxt.moveTo(22,0);
		cxt.lineTo(0,22);
		cxt.stroke();
		cxt.closePath();
	</script> 	
	<a class="bottom-btn" href="http://w2l/?presentType=1&needLogin=0&androidName=17&iosName=MyVoucherViewController">
		   查看服务代金券
	</a>
	<p style="height: 10px;margin: 20px 0px;font-size: 13px;text-align:center;color:#666;display:none;" id="iosInfo">本次活动与Apple Inc.无关</p>
<script type="text/javascript">
var paramJson = {}; 
var pageindex = 0;
var pageindex = 0;
var gNum = 0;
$(document).ready(function(){   
	var url = window.location.search; 
	var paramsArr = (url.split("?")[1]).split("&"); 
	$.each(paramsArr,function(i){
	var item = paramsArr[i].split("=");
	paramJson[item[0]] = item[1];
	}); 
	var sUserAgent = navigator.userAgent.toLowerCase(); 
    var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
    var bIsIphone = sUserAgent.match(/iphone/i) == "iphone";
    var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
    var bIsAndroid = sUserAgent.match(/android/i) == "android"; 
    if(bIsIpad || bIsIphone || bIsIphoneOs){
	$("#iosInfo").show();
    }   
	$("#close").click(function(){
		$(".maxTip").hide();
	});
	getHistoryList(); 
	$(".tip").click(function(){
	getHistoryList(); 
	});
});
 
function getHistoryList(){   
	$.ajax({
	      url: '/yangchebao-app-ws/ws/0.1/autogain/driving/award/list?userInfoId='+paramJson.userId+'&pageindex='+pageindex+'&pagesize=10',
	      type: 'get',  
	      async:false,
	      dataType: 'json',
	      success: function(data) {   
		      if(pageindex==0){
				$(".hlist").html("");
			  }
              if((data.page+1)<data.totalPages){
                $(".htip").show();
              } else{
                $(".htip").hide();
              }  
              pageindex++;  
              var items = data.items; 
              if(items.length>0){
              $.each(items,function(i){
                var item = items[i];   
				var _span = "";
				if(item.awardStatus==0){
					_span = '<span>待领取</span>';
				}else if(item.awardStatus==1){
					_span = '<span>已领取</span>';
				}else if(item.awardStatus==2){
					_span = '<span>已过期</span>';
				}
                var _li = '<li>'
			    	+'	<h1>'+item.createDate+_span+'</h1>';
				if(item.insuranceFund!=0){
					_li += '<p>保险金奖励：<span>+'+item.insuranceFund+'元</span></p>'
				}
				if(item.voucher!="无"){
					_li += '<p>服务奖励：<span>'+item.voucher+'</span></p>'
				}  
			    _li	+= '</li> ';
                $(".hlist").append(_li);
              });
            }else{
               $(".hlist-null").show();
			   $(".hlist").hide();
            }
	      }
	 });
} 
</script> 
</body> 
</html>

