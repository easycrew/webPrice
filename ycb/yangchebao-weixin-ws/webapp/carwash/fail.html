<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script> 
	<script type="text/javascript" src="js/jquery.json-2.2.js"></script>
	<script type="text/javascript" src="js/index.js"></script> 
	<title>付款失败</title>
</head>
<style type="text/css">
body{ 
    font-family:"黑体", "微软雅黑";
	font-size:62.5%;
	background-color: #fff;
} 
body,ul,li{
	margin:0;
	padding:0; 
}
.content{
	margin:0 2.1em;
}
.title{
	text-align:center;
}
.title h1{ 
	display:inline-block; 
	color:#ff8463;
	padding-left:58px; 
	margin:45px auto 40px;  
	background-image:url('http://weixin.yangchebao.com.cn/yangchebao-weixin-ws/carwash/css/images/sad.png');
	background-repeat: no-repeat;
	background-size: 45px auto;
	font-size:1.8em;
	font-weight:normal; 
	text-align: left;
}
.title h1 span{
	display:inline-block; 
	line-height:150%;
	font-size: 0.83em;
}
.comment{
	border-top:1px solid #34cc89;
	border-bottom:1px solid #34cc89; 
	color:#1e1e1e; 
	line-height: 150%;
	margin:0 0; 
	padding:20px;  
	margin-bottom:40px;
	font-size: 1.4em;
	text-align: center;
}  
.button{  
	background-color: #34cc89; 
	color:#fff; 
	height:35px; 
	text-align:center;
	line-height:35px;  
	border-radius: 5px;
	font-size:1.8em; 
	margin: 0 3.9em;
	cursor: pointer;
}
.tasat-wrap{
    position: fixed;
    text-align: center;
    bottom: 50%;
    width: 100%; 
}
.tasat{
    background-color: #000;
    border-radius: 8px;
    color: #fff;
    font-size: 1.6em; 
    opacity: 0.8;
    padding: 0.5em; 
    display: inline-block;
    margin: 0 20px;
}
</style>
<body> 
	<div class="content">
		<div class="title">
			<h1>Sorry！<br><span>支付失败</span></h1>
		</div>  
		<p class="comment">点击“重新支付”重新进入微信支付界面</p> 
		<div class="button">重新支付</div>
	</div> 
<script type="text/javascript">
	$(document).ready(function(){
	  var url =window.location.search;  
      var paramJson = {};
      if(url!=undefined&&url!=""){
        var paramsArr = (url.split("?")[1]).split("&"); 
        $.each(paramsArr,function(i){
         var item = paramsArr[i].split("=");
         paramJson[item[0]] = item[1];
        });    
      } 
      $(".button").click(function(){
 		 pay();
 	  });   
      function pay(){ 
			var postData = {}; 
			postData.customerId	 = paramJson.customerId;
			postData.orderId	 = paramJson.orderId;//购买对象的Id businessServiceRelId 或busiDinnerRelId
			postData.openid	 = paramJson.openid;  
			postData.payChannelKey	 = 'weixin.web.pay';
			postData.isUseBalance	 = 0;//是否使用余额支付  0否  1是
			postData.vouchers	 = [];   
			$.ajax({
                url: '/yangchebao-app-ws/ws/0.1/orderservice/order/pay',
                type: 'post',
                async: false,
                data:$.toJSON(postData),
                dataType: 'json',
                contentType:'application/json;charset=utf-8',
                success:function(data){  
                    onBridgeReady(data);  
                },error:function(xhr){   
                    var mes = eval('('+xhr.responseText+')');  
					alertTasat(mes[0].message); 
                } 
            }); 
      } 	


     
	});
</script> 
</body>
</html>