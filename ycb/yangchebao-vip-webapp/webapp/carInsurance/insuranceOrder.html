<style>
    #Wraper_insurance_orderList h2{
        background-color:#3586f5;
        color:#fff;
        padding-left:1%;
        margin-bottom:0;
        line-height:50px;
    }
    .cDiv table tr td, .cDiv table tr th{text-align:center;}
</style>
<div class="urlContentWraper" id="Wraper_insurance_orderList">
    <h2>车险订单列表</h2>
    <div class="ui-info-layout">
		<table id="Table_insurance_orderList"></table>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        var wraper = $('#Wraper_insurance_orderList');
        var page_column_model = new Array();

        page_column_model.push({display: '购险客户手机', name : 'mobile'});
        page_column_model.push({display: '保单号', name : 'prtNo'});
        page_column_model.push({display: '交强险（元）', name : 'efcCharge'});
        page_column_model.push({display: '商业险（元）', name : 'bizCharge'});
        page_column_model.push({display: '车船税（元）', name : 'taxCharge'});
        page_column_model.push({display: '提成金额（元）', name : 'deductCharge'});
        page_column_model.push({display: '客户购买保险时间', name : 'buyDate'});
        page_column_model.push({display: '订单状态', name : 'status',diy:function(item,$div){
            if(item.status.indexOf('待支付')!=-1){
                $div.html(item.status+' <a href="'+item.payPcUrl+'">立即支付</a>')
            }else{
                $div.html(item.status)
            }
        },width:150});

        $('#Table_insurance_orderList',wraper).flexigrid({
            url:'/shopmanage-ws/ws/0.1/insuredOrder/getInsuredOrderList?businessInfoId='+carsmart_config.businessInfoId+'&appCode=ycbybx',
            reload:false,
            method:'get', 
            colModel : page_column_model,
            buttons : [],
            searchitems :[],
            showSearch:true,
            pagination: {
                diaplay_pages: 5,
                align: 'bottom' 
            },
            // overflow:true,
            onError:showRemarkError,
            showCheckbox: false
        });
        $('div.pDiv2',wraper).prepend('<p style="float:left;line-height:26px;">用户完成订单后，订单状态变为“已承保”后，即可获得提成。</p>');
        $('div.bDiv',wraper).css({'overflow-x':'auto'});
        setTimeout(function(){
            var bHeight= $('div.bDiv',wraper).height()+20;
            $('div.bDiv',wraper).css({'height':bHeight+'px'});
        },200);
        $('div.pDiv2',wraper).on('click','span.ui-state-default',function(){
            setTimeout(function(){
                var tHeight=$('table#Table_insurance_orderList',wraper).height()+20;
                $('div.bDiv',wraper).css({'height':tHeight+'px'})
            },200);
        })
        
        $('div.hDiv',wraper).css('overflow','hidden')
    })
    function showRemarkError(xhr){
        var errormsg = eval("(" + xhr.responseText + ")");
        var cDiv = $(".cDiv",wraper);
        $.jRadMessage({level:'error',message:errormsg[0].message,selector:cDiv});
    }
</script>