<style>
	#months_table1 div{
		text-align:center;
	}
	#months_table2 div{
		text-align:center;
	}
	#months_table3 div{
		text-align:center;
	}
	div.datetimepickerBS-years th.next,div.datetimepickerBS-years th.prev{
		visibility:hidden!important;
	}
	div.datetimepickerBS-years span.old{
		color:#999!important;
	}
</style>
<div class="urlContentWraper" id="ycb-stat"> 
    <div class="row-fluid">
        <div class="span12">
            <div class="widget-box applay-situation">
                <div class="widget-header">
                    <h3 class="lighter">所有店铺总数据</h3> 
                </div>
                <div class="widget-body">
                    <input type="hidden" name="situation">
                    <div class="widget-main">
						<ul class="clearfix jrad-list-situation">
							<li><div><h4>总成交金额（元）</h4><p></p></div></li>
							<li><div><h4>总成交订单数（个）</h4><p></p></div></li>
							<li><div><h4>商铺点击数（人）</h4><p></p></div></li> 
						</ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
	<div class="row-container" style="margin:10px 0 20px;"> 
        <div class="jrad-radio-terminal"></div>
    </div>
    <div class="row-fluid" id="guestStat">
	      <div class="span12">
            <div class="widget-box applay-situation">
                <div class="widget-header">
                    <h3 class="lighter">按月统计表</h3>
                    <div class="span6 grid-layout-content fluid-wrap" style="position:relative;top:9px;left:0;min-width:390px;">
							<div id="searchtype_radio" class="jrad-radio-container"></div>
					</div>
					<div class="widget-toolbar no-border">
                    	<div class="clearfix time-search-box">
						<div class="input-append date" id="stat_date" style="float:left">
							<div class="input-wrap">
							    <input type="text">
							</div>
							<span class="add-on"><i class="icon-calendar"></i></span>
						</div>
						<button class="btn btn-mini btn-primary jrad-btn-search">搜索</button>                   	
                    	</div>
					</div>
                </div>
                <div class="widget-body">
                    <div class="jrad-dimensiontable">
						<table id="months_table1" load="false">
							<tr>
								<th class="row_header"><div>商家</div></th>
								<th title="1月" colspan="1" style="text-align: center;" class="col"><div rel="1:2">1月</div></th>
								<th title="2月" colspan="1" style="text-align: center;" class="col"><div rel="1:3">2月</div></th>
								<th title="3月" colspan="1" style="text-align: center;" class="col"><div rel="1:4">3月</div></th>
								<th title="4月" colspan="1" style="text-align: center;" class="col"><div rel="1:5">4月</div></th>
								<th title="5月" colspan="1" style="text-align: center;" class="col"><div rel="1:6">5月</div></th>
								<th title="6月" colspan="1" style="text-align: center;" class="col"><div rel="1:7">6月</div></th>
								<th title="7月" colspan="1" style="text-align: center;" class="col"><div rel="1:8">7月</div></th>
								<th title="8月" colspan="1" style="text-align: center;" class="col"><div rel="1:9">8月</div></th>
								<th title="9月" colspan="1" style="text-align: center;" class="col"><div rel="1:10">9月</div></th>
								<th title="10月" colspan="1" style="text-align: center;" class="col"><div rel="1:11">10月</div></th>
								<th title="11月" colspan="1" style="text-align: center;" class="col"><div rel="1:12">11月</div></th>
								<th title="12月" colspan="1" style="text-align: center;" class="col"><div rel="1:13">12月</div></th>
								<th class="col" style="text-align: center;"><div>总计</div></th>
							</tr> 
						</table>
						<table id="months_table2"  load="false" style="display:none;">
							<tr>
								<th class="row_header"><div>商家</div></th>
								<th title="1月" colspan="1" style="text-align: center;" class="col"><div rel="1:2">1月</div></th>
								<th title="2月" colspan="1" style="text-align: center;" class="col"><div rel="1:3">2月</div></th>
								<th title="3月" colspan="1" style="text-align: center;" class="col"><div rel="1:4">3月</div></th>
								<th title="4月" colspan="1" style="text-align: center;" class="col"><div rel="1:5">4月</div></th>
								<th title="5月" colspan="1" style="text-align: center;" class="col"><div rel="1:6">5月</div></th>
								<th title="6月" colspan="1" style="text-align: center;" class="col"><div rel="1:7">6月</div></th>
								<th title="7月" colspan="1" style="text-align: center;" class="col"><div rel="1:8">7月</div></th>
								<th title="8月" colspan="1" style="text-align: center;" class="col"><div rel="1:9">8月</div></th>
								<th title="9月" colspan="1" style="text-align: center;" class="col"><div rel="1:10">9月</div></th>
								<th title="10月" colspan="1" style="text-align: center;" class="col"><div rel="1:11">10月</div></th>
								<th title="11月" colspan="1" style="text-align: center;" class="col"><div rel="1:12">11月</div></th>
								<th title="12月" colspan="1" style="text-align: center;" class="col"><div rel="1:13">12月</div></th>
								<th class="col" style="text-align: center;"><div>总计</div></th>
							</tr> 
						</table>
						<table id="months_table3"  load="false" style="display:none;">
							<tr>
								<th class="row_header"><div>商家</div></th>
								<th title="1月" colspan="1" style="text-align: center;" class="col"><div rel="1:2">1月</div></th>
								<th title="2月" colspan="1" style="text-align: center;" class="col"><div rel="1:3">2月</div></th>
								<th title="3月" colspan="1" style="text-align: center;" class="col"><div rel="1:4">3月</div></th>
								<th title="4月" colspan="1" style="text-align: center;" class="col"><div rel="1:5">4月</div></th>
								<th title="5月" colspan="1" style="text-align: center;" class="col"><div rel="1:6">5月</div></th>
								<th title="6月" colspan="1" style="text-align: center;" class="col"><div rel="1:7">6月</div></th>
								<th title="7月" colspan="1" style="text-align: center;" class="col"><div rel="1:8">7月</div></th>
								<th title="8月" colspan="1" style="text-align: center;" class="col"><div rel="1:9">8月</div></th>
								<th title="9月" colspan="1" style="text-align: center;" class="col"><div rel="1:10">9月</div></th>
								<th title="10月" colspan="1" style="text-align: center;" class="col"><div rel="1:11">10月</div></th>
								<th title="11月" colspan="1" style="text-align: center;" class="col"><div rel="1:12">11月</div></th>
								<th title="12月" colspan="1" style="text-align: center;" class="col"><div rel="1:13">12月</div></th>
								<th class="col" style="text-align: center;"><div>总计</div></th>
							</tr> 
						</table>
					</div>
                </div>
				<div class="widget-body" id="amount_table" data-load='false'>
                     <div class="jrad-dimensiontable"></div>
                </div>
            </div>
        </div> 
    </div>  
	<!--button class="btn btn-mini btn-primary" id="jrad-btn-excel">导出EXCEL</button-->
    </div>
</div>
<script type="text/javascript">
$(document).ready(function(){
	var wraper = $('#ycb-stat');  
	//总数据 type 1 本店总数据  2 所有店铺总数据 
	$.jRadGet({url:'/vip-ws/ws/0.1/busiStatic/getshopFinishedOrderAndUv?shopAccountId='+carsmart_config.shopId+'&type=2',
		success:function(data){
			$('.jrad-list-situation',wraper).children("li:first").find("p").html(data.totalAmount);
			$('.jrad-list-situation',wraper).children("li:eq(1)").find("p").html(data.totalNum);
			$('.jrad-list-situation',wraper).children("li:last").find("p").html(data.busiPV);	
		}  
	});
	//分店统计报表 
	//searchtype查询类型(1 按成交金额统计 2  按成交订单统计 3 按商铺点击数统计) 默认为1
	var year = moment().format('YYYY'); 
	shopbranchStaticTable(year,'1');
	function shopbranchStaticTable(year,searchtype){
		$("table",wraper).hide(); 
		var _table = $("#months_table"+searchtype); 
		_table.show();
		$.jRadGet({url:'/vip-ws/ws/0.1/busiStatic/shopbranchStaticTable?shopAccountId='+carsmart_config.shopId+'&year='+year+'&searchtype='+searchtype,
			success:function(data){ 
				$(".addTr",_table).remove();  
				var str = ";"
				$.each(data,function(i){
					var item = data[i]; 
					if(item.shopName==undefined){
						item.shopName = item.busiRegName; 
					} 
					str += '<tr class="addTr"><th class="row_content"><div>'+item.shopName+'</div></th>'; 
					for(var i=1;i<13;i++){ 
						var month = ""+i;
						str+='<td class="data"><div>'+item[month]+'</div></td>'
					}  
					str+='<td class="data"><div>'+item['rowTotal']+'</div></td></tr>'; 
				});
				_table.append(str);  
			}  
		});
	}
	var radioVal = "1";
	$('#searchtype_radio',wraper).radio({
		data:[{id:'1',name:'按成交金额统计'},{id:'2',name:'按成交订单统计'},{id:'3',name:'按商铺点击数统计'}],
		onclick:function(){ 
			var searchtype = $('#searchtype_radio',wraper).radio('val');
			if(searchtype!=radioVal){
				radioVal=searchtype;
				var year = $('#stat_date input').val();
				shopbranchStaticTable(year,searchtype); 
			}
		} 
	});
	$('#searchtype_radio',wraper).radio('val','1');
	$('#stat_date').datetimepickerBS({
	    format: 'yyyy',
	    autoclose: 1,
		startView: 4,
		minView: 4,
		startDate:'2014',
		endDate:'2015',
		pickerPosition:'bottom-left'
	}).on('changeDate',function(ev){		
		var date = ev.date;
        var year = date.getFullYear() ;   
		var searchtype = $('#searchtype_radio',wraper).radio('val');
		shopbranchStaticTable(year,searchtype); 
	}); 
	$('#stat_date input').val(year);	 
});  
</script>